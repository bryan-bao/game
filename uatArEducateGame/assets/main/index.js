System.register("chunks:///main.js",["cc"],(function(){"use strict";var e,t,n,i,r,o,a,s,u,c,l,h,d,f,p,g,v,m,y,b,w,T,_,C,N,S,A,I,D,O,P;return{setters:[function(R){e=R.cclegacy,t=R._decorator,n=R.sys,i=R.log,r=R.Component,o=R.resources,a=R.error,s=R.Prefab,u=R.instantiate,c=R.find,l=R.SpriteFrame,h=R.isValid,d=R.assetManager,f=R.Texture2D,p=R.assert,g=R.AudioClip,v=R.warn,m=R.clamp01,y=R.UITransform,b=R.Vec3,w=R.Sprite,T=R.Label,_=R.Node,C=R.View,N=R.ProgressBar,S=R.Animation,A=R.AnimationComponent,I=R.Tween,D=R.AudioSource,O=R.Widget,P=R.VideoPlayer}],execute:function(){function R(e,t,n,i,r,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(i,r)}function E(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function a(e){R(o,i,r,a,s,"next",e)}function s(e){R(o,i,r,a,s,"throw",e)}a(void 0)}))}}function M(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function U(e,t,n){return t&&M(e.prototype,t),n&&M(e,n),e}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,L(e,t)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function z(e,t,n,i,r){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var G,q,j;e._RF.push({},"05c37maoztIcqYQxP8Afj1j","configuration",void 0);var V,H,W,Y=(0,t.ccclass)("configuration")((j=q=function(){function e(){F(this,"jsonData",null),F(this,"path",null),F(this,"KEY_CONFIG","CarConfig"),F(this,"markSave",!1),F(this,"saveTimer",-1)}var t=e.prototype;return t.start=function(){var e,t=this;(this.jsonData={userId:""},this.path=this.getConfigPath(),n.isNative)?e=jsb.fileUtils.getValueMapFromFile(this.path)[this.KEY_CONFIG]:e=n.localStorage.getItem(this.KEY_CONFIG);if(e&&e.length){e.startsWith("@")&&(e=e.substring(1));try{var i=JSON.parse(e);this.jsonData=i}catch(e){}}this.saveTimer=setInterval((function(){t.scheduleSave()}),500)},t.setConfigDataWithoutSave=function(e,t){var n=this.jsonData.userId;this.jsonData[n]?this.jsonData[n][e]=t:console.error("no account can not save")},t.setConfigData=function(e,t){this.setConfigDataWithoutSave(e,t),this.markSave=!0},t.getConfigData=function(e){var t=this.jsonData.userId;if(this.jsonData[t]){var n=this.jsonData[t][e];return n||""}return i("no account can not load"),""},t.setGlobalData=function(e,t){this.jsonData[e]=t,this.save()},t.getGlobalData=function(e){return this.jsonData[e]},t.setUserId=function(e){this.jsonData.userId=e,this.jsonData[e]||(this.jsonData[e]={}),this.save()},t.getUserId=function(){return this.jsonData.userId},t.scheduleSave=function(){this.markSave&&this.save()},t.markModified=function(){this.markSave=!0},t.save=function(){var e=JSON.stringify(this.jsonData);if(this.markSave=!1,n.isNative){var t={};t[this.KEY_CONFIG]=e,jsb.fileUtils.writeToFile(t,this.path)}else{n.localStorage.setItem(this.KEY_CONFIG,e)}},t.getConfigPath=function(){var e=n.platform,t="";return e===n.OS_WINDOWS?t="src/conf":e===n.OS_LINUX?t="./conf":n.isNative?(t=jsb.fileUtils.getWritablePath(),t+="conf"):t="src/conf",t},t.parseUrl=function(e){if(e&&!("string"==typeof e&&e.length<=0)){var t={};if("string"==typeof e)(e=e.split("?")[1]).split("&").forEach((function(e){var n=e.indexOf("=");if(-1!==n){var i=e.substring(0,n);t[i]=e.substring(n+1)}}));else t=e;t.action&&this.setGlobalData("urlParams",t),t.source&&this.setGlobalData("source",t.source),t.adchannelid&&this.setGlobalData("adchannelid",t.adchannelid)}},e.generateGuestAccount=function(){return""+Date.now()+10},U(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e,this._instance.start()),this._instance}}]),e}(),F(q,"_instance",void 0),G=j))||G;e._RF.pop(),e._RF.push({},"be8fau3T7VJAopcjaiiAlq+","GameData",void 0);var J=t.ccclass,K=(t.property,J("GameData")((W=H=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return F(x(t=e.call.apply(e,[this].concat(i))||this),"httpDataMap",new Map),F(x(t),"isPlayAnim",!1),F(x(t),"isGuide",!1),F(x(t),"logId",void 0),F(x(t),"ruleId",void 0),F(x(t),"gameId",void 0),F(x(t),"httpData",void 0),F(x(t),"hqBean",""),F(x(t),"abilityNum",""),F(x(t),"MaxNum",""),F(x(t),"abilityValueRuleId",""),F(x(t),"ageBegin",""),F(x(t),"ageEnd",""),F(x(t),"platform",void 0),F(x(t),"selectGameId",void 0),F(x(t),"GameName",void 0),F(x(t),"isCheckBody",!0),F(x(t),"isAr",!0),F(x(t),"isBodyPos",!1),t}k(t,e);var n=t.prototype;return n.urlSearch=function(){var e=window.location.href;console.log("链接参数："+e);var t,n,i=e.indexOf("?"),r=e.substr(i+1).split("&");this.httpData=[];for(var o=0;o<r.length;o++)if((i=r[o].indexOf("="))>0){if(t=r[o].substring(0,i),n=r[o].substr(i+1),this.checkNameValue(t,n))continue;"platform"==t&&(this.platform=n),this.httpData.push({name:t,value:n}),this.httpDataMap.set(t,n)}},n.checkNameValue=function(e,t){var n=!1;switch(e){case"gameId":this.gameId=t,n=!0;break;case"abilityValueRuleId":this.abilityValueRuleId=t,n=!0;break;case"ageBegin":this.ageBegin=t,n=!0;break;case"ageEnd":this.ageEnd=t,n=!0;break;case"ruleId":this.ruleId=t,n=!0}return n},n.getValue=function(e){return this.httpDataMap.get(e)},U(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}(r),F(H,"_instance",void 0),V=W))||V);e._RF.pop(),e._RF.push({},"522069n/4VAEKex7zYYYpUd","Path",void 0);t.ccclass,t.property;var Z,Q,X,$=function(){};F($,"GameIcon","texture/gameIcon/"),F($,"Icon","icon/"),F($,"OpenBg","texture/openBg/"),F($,"svnResVideo","https://hqsjapp-1251510006.cos.ap-shanghai.myqcloud.com/game/classroom/video/"),F($,"serverUrl","http://10.99.29.213:7089"),F($,"uatServerUrl","https://hqsjtest-api.fangte.com/uat"),F($,"formalServerUrl","https://hqsj.fangte.com"),F($,"sitServerUrl","https://hqsjtest-api.fangte.com/sit"),F($,"takeNotes","/api/gameLog/add"),F($,"update","/api/gameLog/update"),F($,"doIt","/api/task/game/doIt"),F($,"acquire","/api/growup/ability/acquire"),e._RF.pop(),e._RF.push({},"0b9f4FewcRHor00/r6P86Ha","ServiceManager",void 0);var ee=t.ccclass,te=(t.property,ee("ServiceManager")((X=Q=function(){function e(){}var t=e.prototype;return t.post=function(e,t,n){var i=new XMLHttpRequest,r=$.uatServerUrl+e,o=t,a="?";for(var s in o){var u=s+"="+o[s];a+=""==a?u:"&"+u}i.open("POST",r+a),i.timeout=5e3;var c=K.instance.httpData;if(c){for(var l=c.length,h=0;h<l;h++){var d=c[h];i.setRequestHeader(d.name,d.value)}i.onreadystatechange=function(){if(console.log("状态status: "+i.status+" 状态readyState:"+i.readyState),4===i.readyState&&200==i.status){var e=i.responseText;console.log("响应参数"),console.log(e),n&&n(JSON.parse(e))}},i.send()}else console.warn("链接端数据未发送")},t.postJson=function(e,t,n){var i=new XMLHttpRequest,r=$.uatServerUrl+e;i.open("POST",r,!0),i.setRequestHeader("content-type","application/json"),i.timeout=5e3;var o=K.instance.httpData;if(o){for(var a=o.length,s=0;s<a;s++){var u=o[s];console.log("请求头："+u.name+"参数："+u.value),i.setRequestHeader(u.name,u.value)}i.onreadystatechange=function(){if(console.log("状态status: "+i.status+" 状态readyState:"+i.readyState),4===i.readyState&&200==i.status){var e=i.responseText;console.log("响应参数"),console.log(e),console.log(JSON.parse(e)),n&&n(JSON.parse(e))}},i.send(JSON.stringify(t))}else console.warn("链接端数据未发送")},t.get=function(e,t,n){var i=new XMLHttpRequest,r=$.uatServerUrl+e;i.open("GET",r+t),i.timeout=5e3;var o=K.instance.httpData;if(o){for(var a=o.length,s=0;s<a;s++){var u=o[s];i.setRequestHeader(u.name,u.value)}i.onreadystatechange=function(){if(console.log("状态status: "+i.status),4===i.readyState&&200==i.status){var e=i.responseText;console.log("响应参数"),console.log(e),n&&n(JSON.parse(e))}},i.send()}else console.warn("链接端数据未发送")},U(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),F(Q,"_instance",void 0),Z=X))||Z);e._RF.pop(),e._RF.push({},"0dc9dlmYRRCQ6UIQuffTBUa","EventType",void 0);var ne={UPDATE_ITEM:"updateItem",UPDATE_ANSWERL:"updateAnswerl",UPDATE_SCORE:"UpdateScore"};e._RF.pop(),e._RF.push({},"0fc99z5iRJB7Z+B0jbAOes4","UIModuleEnum",void 0);var ie,re="main/GameOpenPanel",oe="main/ScorePanel",ae="main/GuidePanel",se="main/GameMainPanel",ue="main/CoursePanel",ce="main/GameView",le="main/GameItem",he="main/AnswerItem";e._RF.pop(),e._RF.push({},"aebeeEGJRZGbK315QTzsoll","resourceUtil",void 0);var de=(0,t.ccclass)("resourceUtil")(ie=function(){function e(){}return e.loadRes=function(e,t,n){var i=o.get(e,t);i&&n?n(null,i):t?o.load(e,t,(function(e,t){if(e)return a(e.message||e),void(n&&n(e,t));n&&n(e,t)})):o.load(e,(function(e,t){if(e)return a(e.message||e),void(n&&n(e,t));n&&n(e,t)}))},e.preload=function(e,t){o.preload("prefab/"+e,t)},e.getMap=function(e,t){var n="map";n+=e>=100?e:e>=10?"0"+e:"00"+e,this.loadRes("map/config/"+n,null,(function(e,n){if(e)t(e,n);else{var i=n,r="";if(i._file){window.LZString&&(r=window.LZString.decompressFromEncodedURIComponent(i._file));var o=JSON.parse(r);t(null,o)}else if(i.text){window.LZString&&(r=window.LZString.decompressFromEncodedURIComponent(i.text));var a=JSON.parse(r);t(null,a)}else if(i.json)t(null,i.json);else{var s=new Error("failed");t(s,null)}}}))},e.getMapObjs=function(e,t,n,i){for(var r=[],a=0;a<t.length;a++)r.push("map/"+e+"/"+t[a]);o.load(r,s,n,i)},e.getUIPrefabRes=function(e,t){this.loadRes("prefab/"+e,s,t)},e.createUI=function(e,t,n){this.getUIPrefabRes(e,(function(e,i){if(e)console.error("界面加载失败");else{var r=u(i);r.setPosition(0,0,0),n||(n=c("Canvas/GamePanel")),n.getChildByName(r.name)||n.addChild(r),t&&t(null,r)}}))},e.getCarsBatch=function(e,t,n){for(var i=[],r=0;r<e.length;r++)i.push("prefab/car/car"+e[r]);for(var a=0;a<i.length;a++){var u=i[a];t?o.load(u,s,t,n):o.load(u,s,n)}},e.getUICar=function(e,t){this.loadRes("prefab/ui/car/uiCar"+e,s,t)},e.getCar=function(e,t){this.loadRes("prefab/car/car"+e,s,t)},e.setCarIcon=function(e,t,n){var i="texture/"+e;this.setSpriteFrame(i,t,n)},e.getJsonData=function(e,t){o.load("datas/"+e,(function(e,n){if(e)a(e.message||e);else{var i=n;if(i.json)t(e,i.json);else{var r=new Error("failed!!!");t(r,null)}}}))},e.getData=function(e,t){o.load("config/"+e,(function(e,n){if(e)a(e.message||e);else{var i=n.text;i?t(e,i):o.load(n.nativeUrl,(function(e,n){t(e,i=n)}))}}))},e.setSpriteFrame=function(e,t,n){this.loadRes(e+"/spriteFrame",l,(function(i,r){if(i)return console.error("set sprite frame failed! err:",e,i),void(n&&n(i,r));t&&h(t)&&(t.spriteFrame=r,n&&n(null,r))}))},e.setRemoteImage=function(e,t,n){if(e&&e.startsWith("http")){d.loadAny([{url:e,type:"png"}],null,(function(t,i){if(t)return console.error("set avatar failed! err:",e,t),void n(t,i);var r=new f;r.image=i;var o=new l;o.texture=r,n&&n(null,o)}))}},e.setGameIcon=function(e,t,n){e.startsWith("http")?this.setRemoteImage(e,t,n):this.setSpriteFrame("gamePackage/textures/icons/games/"+e,t,n)},e.loadRemote=function(e,t){d.loadRemote(e,(function(n,i){n?console.error("set avatar failed! err:",e,n):t(n,i)}))},e.loadScene=function(e,t){o.loadScene(e,(function(e,n){e?console.error("场景加载失败"):t&&t(e,n)}))},e.loadDir=function(e,t){o.loadDir(e,(function(e,n){e?console.error("目录资源加载失败"):t&&t(e,n)}))},e.getCustomer=function(e,t){this.loadRes("gamePackage/map/customer/customer"+e,s,t)},e.setCustomerIcon=function(e,t,n){var i="gamePackage/texture/head/head"+e;this.setSpriteFrame(i,t,n)},e.getEffect=function(e,t){this.loadRes("prefab/effect/"+e,s,t)},e}())||ie;e._RF.pop(),e._RF.push({},"e478cuMHJdIHa5fP3m5UZ7S","audioManager",void 0);var fe=function(){function e(){F(this,"soundVolume",1)}var t=e.prototype;return t.init=function(t){this.soundVolume=this.getConfiguration(!1)?1:0,e._audioSource=t},t.getConfiguration=function(e){var t;return void 0===(t=e?Y.instance.getGlobalData("music"):Y.instance.getGlobalData("sound"))||"true"===t},t.playMusic=function(t){var n=e._audioSource;p(n,"AudioManager not inited!"),n.loop=t,!n.playing&&t?n.play():n.pause()},t.playSound=function(t,n,i){var r;void 0===i&&(i=!1),r=n||e._audioSource;de.loadRes("audio/sound/"+t,g,(function(e,t){e?v("load audioClip failed: ",e):(r.clip=t,r.loop=i,r.play())}))},t.playOneShot=function(t,n,i){var r,o=this;void 0===i&&(i=!1),r=n||e._audioSource;var a="audio/sound/";i&&(a="audio/music/",r.loop=i),de.loadRes(a+t,g,(function(e,t){e?v("load audioClip failed: ",e):r.playOneShot(t,r.volume?o.soundVolume/r.volume:0)}))},t.setMusicVolume=function(t,n){var i=n||e._audioSource;p(i,"AudioManager not inited!"),t=m(t),i.volume=t},t.setSoundVolume=function(e){this.soundVolume=e},t.openMusic=function(){this.setMusicVolume(.8),Y.instance.setGlobalData("music","true")},t.closeMusic=function(){this.setMusicVolume(0),Y.instance.setGlobalData("music","false")},t.openSound=function(){this.setSoundVolume(1),Y.instance.setGlobalData("sound","true")},t.closeSound=function(){this.setSoundVolume(0),Y.instance.setGlobalData("sound","false")},U(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}();F(fe,"_instance",void 0),F(fe,"_audioSource",void 0),e._RF.pop(),e._RF.push({},"335fboQwpFHpIsGcpUMFQKX","GameCfg",void 0);var pe,ge="game",ve="answerBank",me="randomBank";e._RF.pop(),e._RF.push({},"740d26+WxhIWqfFv0nSwUuT","CsvManager",void 0);var ye,be,we,Te=t.ccclass,_e=[",",";","\t","|","^"],Ce=["\r\n","\r","\n"],Ne=function(e,t,n,i){return n instanceof Array?"number"===n[t]?Number(i[t]):"boolean"===n[t]?"true"===i[t]||"t"===i[t]||"1"===i[t]:i[t]:isNaN(Number(e))?"false"==e||"true"==e||"t"==e||"f"==e?"true"===i[t]||"t"===i[t]||"1"===i[t]:i[t]:Number(i[t])},Se={STANDARD_DECODE_OPTS:{skip:0,limit:!1,header:!1,cast:!1,comment:""},STANDARD_ENCODE_OPTS:{delimiter:_e[0],newline:Ce[0],skip:0,limit:!1,header:!1},quoteMark:'"',doubleQuoteMark:'""',quoteRegex:/"/g,opts:{},assign:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Array.prototype.slice.call(arguments);for(var i=t[0],r=t.slice(1),o=0,a=r.length;o<a;o++)for(var s in r[o])i[s]=r[o][s];return i},map:function(e,t){for(var n=[],i=0,r=e.length;i<r;i++)n[i]=t(e[i],i);return n},getType:function(e){return Object.prototype.toString.call(e).slice(8,-1)},getLimit:function(e,t){return!1===e?t:1},buildObjectConstructor:function(e,t,n){return function(i){var r={},o=function(e,t){return r[e]=t};return n?e.forEach((function(e,r){o(e,Ne(t[r],r,n,i))})):e.forEach((function(e,n){o(e,Ne(t[n],n,null,i))})),r}},buildArrayConstructor:function(e,t,n){return function(i){var r=new Array(t.length),o=function(e,t){return r[e]=t};return n?e.forEach((function(e,r){o(e,Ne(t[r],r,n,i))})):e.forEach((function(e,n){o(e,Ne(t[n],n,null,i))})),r}},frequency:function(e,t,n){void 0===n&&(n=!1);for(var i=0,r=0,o=this.getLimit(n,e.length);r<o&&-1!==(r=e.indexOf(t,r));)r+=1,i++;return i},mostFrequent:function(e,t,n){for(var i="",r=t.length-1;r>=0;r--)this.frequency(e,t[r],n)>0&&(i=t[r]);return i||t[0]},unsafeParse:function(e,t,n){var i,r,o=e.split(t.newline);function a(e){var n=e.shift();if(n.indexOf('"')>=0){for(var i=0,r=0,o=0;e.length>0&&(-1!==(i=n.indexOf('"',r))||o%2!=0);)-1!==i?(r=i+1,o++):n=n+t.newline+e.shift();var a,s=[],u=0,c=0,l=0,h=n.length;for(var d in n)if(n.hasOwnProperty(d)){var f=parseInt(d),p=n[d];0===f&&'"'===p&&(u++,c=1),'"'===p&&(u++,n[f-1]===t.delimiter&&c===f&&c++),'"'===p&&u%2==0&&(n[f+1]!==t.delimiter&&f+1!==h||(l=f,a=n.substring(c,l),s.push(a),l=c=l+2)),p===t.delimiter&&u%2==0&&((l=f)>c?(a=n.substring(c,l),s.push(a),l=c=l+1):l===c&&(s.push(""),l=c=l+1))}return(l=h)>=c&&(a=n.substring(c,l),s.push(a)),s}return n.split(t.delimiter)}for(t.skip>0&&o.splice(t.skip),t.header?(!0===t.header?(t.comment=a(o),t.cast=a(o),i=a(o)):"Array"===this.getType(t.header)&&(i=t.header),r=this.buildObjectConstructor(i,o[0].split(t.delimiter),t.cast)):r=this.buildArrayConstructor(i,o[0].split(t.delimiter),t.cast);o.length>0;){var s=a(o);s.length>1&&n(r(s),i[0])}return!0},safeParse:function(e,t){var n=t.newline,i=e.split(n);return t.skip>0&&i.splice(t.skip),!0},encodeCells:function(e,t,n){for(var i=e.slice(0),r=0,o=i.length;r<o;r++)-1!==i[r].indexOf(this.quoteMark)&&(i[r]=i[r].replace(this.quoteRegex,this.doubleQuoteMark)),-1===i[r].indexOf(t)&&-1===i[r].indexOf(n)||(i[r]=this.quoteMark+i[r]+this.quoteMark);return i.join(t)},encodeArrays:function(e,t,n){var i=t.delimiter,r=t.newline;t.header&&"Array"===this.getType(t.header)&&n(this.encodeCells(t.header,i,r));for(var o=0,a=this.getLimit(t.limit,e.length);o<a;o++)n(this.encodeCells(e[o],i,r));return!0},encodeObjects:function(e,t,n){var i=t.delimiter,r=t.newline,o=[],a=[];for(var s in e[0])o.push(s),a.push(e[0][s]);!0===t.header?n(this.encodeCells(o,i,r)):"Array"===this.getType(t.header)&&n(this.encodeCells(t.header,i,r)),n(this.encodeCells(a,i,"\n"));for(var u=1,c=this.getLimit(t.limit,e.length);u<c;u++){a=[];for(var l=0,h=o.length;l<h;l++)a.push(e[u][o[l]]);n(this.encodeCells(a,i,r))}return!0},parse:function(e,t,n){var i=[];if("Function"===this.getType(t)?(n=t,t={}):"Function"!==this.getType(n)&&(n=i.push.bind(i)),t=this.assign({},this.STANDARD_DECODE_OPTS,t),this.opts=t,!t.delimiter||!t.newline){var r=Math.min(48,Math.floor(e.length/20),e.length);t.delimiter=t.delimiter||this.mostFrequent(e,_e,0!==r),t.newline=t.newline||this.mostFrequent(e,Ce,0!==r)}return this.unsafeParse(e,t,n)&&(!(i.length>0)||i)},encode:function(e,t,n){var i=[];return"Function"===this.getType(t)?n=t:"Function"!==this.getType(n)&&(n=(i=[]).push.bind(i)),(t=this.assign({},this.STANDARD_ENCODE_OPTS,t)).skip>0&&(e=e.slice(t.skip)),("Array"===this.getType(e[0])?this.encodeArrays:this.encodeObjects)(e,t,n)&&(!(i.length>0)||i.join(t.newline))}},Ae=Te("CsvManager")(pe=function(){function e(){F(this,"csvTables",{}),F(this,"csvTableForArr",{}),F(this,"tableCast",{}),F(this,"tableComment",{})}var t=e.prototype;return t.addTable=function(e,t,n){if(!this.csvTables[e]||n){var i={},r=[];Se.parse(t,{header:!0},(function(e,t){i[e[t]]=e,r.push(e)})),this.tableCast[e]=Se.opts.cast,this.tableComment[e]=Se.opts.comment,this.csvTables[e]=i,this.csvTableForArr[e]=r}},t.getTableArr=function(e){return this.csvTableForArr[e]},t.getTable=function(e){return this.csvTables[e]},t.queryOne=function(e,t,n){var i=this.getTable(e);if(!i)return null;if(!t)return i[n];for(var r in i)if(i.hasOwnProperty(r)&&i[r][t]===n)return i[r]},t.queryByID=function(e,t){return this.queryOne(e,null,t)},t.queryAll=function(e,t,n){var i=this.getTable(e);if(!i||!t)return null;var r={};for(var o in i)i.hasOwnProperty(o)&&i[o][t]===n&&(r[o]=i[o]);return r},t.queryIn=function(e,t,n){var i=this.getTable(e);if(!i||!t)return null;for(var r={},o=Object.keys(i),a=o.length,s=0;s<a;s++){var u=i[o[s]];n.indexOf(u[t])>-1&&(r[o[s]]=u)}return r},t.queryByCondition=function(e,t){if(t.constructor!==Object)return null;var n=this.getTable(e);if(!n)return null;for(var i={},r=Object.keys(n),o=r.length,a=Object.keys(t),s=a.length,u=0;u<o;u++){for(var c=n[r[u]],l=!0,h=0;h<s;h++){var d=a[h];l=l&&t[d].indexOf(c[d])>-1&&!i[r[u]]}l&&(i[r[u]]=c)}return i},e}())||pe;e._RF.pop(),e._RF.push({},"acd0cVlaIhLurmAIUS/N+2B","localConfig",void 0);var Ie=t.ccclass,De=(t.property,Ie("localConfig")((we=be=function(){function e(){F(this,"csvManager",null),F(this,"_callback",null),F(this,"_skills",{}),F(this,"currentLoad",0),F(this,"cntLoad",0),F(this,"servers",[])}var t=e.prototype;return t.loadConfig=function(e){this._callback=e,this.csvManager=new Ae,this.loadCSV()},t.loadCSV=function(){var e=this,t=[ge,ve,me];this.cntLoad=t.length,t.forEach((function(t,n,i){de.getData(t,(function(n,i){e.csvManager.addTable(t,i),e.tryToCallbackOnFinished()}))}))},t.queryOne=function(e,t,n){return this.csvManager.queryOne(e,t,n)},t.queryByID=function(e,t){return this.csvManager.queryByID(e,t)},t.getTable=function(e){return this.csvManager.getTable(e)},t.getTableArr=function(e){return this.csvManager.getTableArr(e)},t.getLvCfgs=function(t,n,i){var r=e.instance.getTableArr(t);if(!r)return null;for(var o=[],a=r.length,s=0;s<a;s++){var u=r[s];n==u.gameId&&u.level==i&&o.push(u)}return o},t.getGameIdCfgs=function(t,n){var i=e.instance.getTableArr(t);if(!i)return"";for(var r=i.length,o=0;o<r;o++){var a=i[o];if(n==a.gameId)return a.random}return""},t.queryAll=function(e,t,n){return this.csvManager.queryAll(e,t,n)},t.queryIn=function(e,t,n){return this.csvManager.queryIn(e,t,n)},t.queryByCondition=function(e,t){return this.csvManager.queryByCondition(e,t)},t.tryToCallbackOnFinished=function(){this._callback&&(this.currentLoad++,this.currentLoad>=this.cntLoad&&this._callback())},t.getCurrentServer=function(){return this.servers[0]},t.getVersion=function(){var e=this.getCurrentServer();return e?e.version:"unknown"},U(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),F(be,"_instance",void 0),ye=we))||ye);e._RF.pop(),e._RF.push({},"60533HLjDVKM4hKMIfh75fg","PanelBase",void 0);var Oe=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return F(x(t=e.call.apply(e,[this].concat(i))||this),"moduleEum",void 0),F(x(t),"panelLayer",void 0),t}k(t,e);var n=t.prototype;return n.start=function(){},n.show=function(e){},n.hide=function(){},n.dispose=function(){},t}(r);e._RF.pop(),e._RF.push({},"c678338DOdGbalFjq+Q/3Qk","PlatformIos",void 0);var Pe,Re,Ee,Me=function(){function e(){}var t=e.prototype;return t.hasRegistFunc=function(e){return window&&window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers[e]},t.reqFunc=function(e,t,n){window.webkit.messageHandlers[e].postMessage({})},t.setResFunc=function(e,t){window[e]||(window[e]=t)},t.clearResFunc=function(e){window[e]=void 0},U(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}();F(Me,"_instance",void 0),e._RF.pop(),e._RF.push({},"5df7c/B/SpAO5q621xAbDrw","UIManger",void 0);var Ue=t.ccclass,Fe=(t.property,Ue("UIManger")((Ee=Re=function(){function e(){F(this,"m_UIPanelDic",new Map),F(this,"m_UIPanel",new Map)}var t=e.prototype;return t.getPanel=function(){return this.m_UIPanel},t.registerPanel=function(e,t,n){void 0===n&&(n=!1),this.m_UIPanel.set(e,{clsPanel:t,isRelease:n})},t.showPanel=function(e,t,n){var i=this,r=this.m_UIPanel.get(e),o=r.clsPanel,a=r.isRelease;if(!o)return console.error("没有注册的界面");var s=this.m_UIPanelDic.get(e),u=e.lastIndexOf("/"),c=e.slice(u+1);if(s){if(!s.node||!s.view)return void console.error("找不到对应的Panel类");var l=s.node.getComponent(c);s.node.setSiblingIndex(-1),l.show(t)}else de.createUI(e,(function(r,s){var u=s.getComponent(c);u.show&&u.show(t),u.moduleEum=e,s.setSiblingIndex(-1),n&&n(u),i.m_UIPanelDic.set(e,new ke(s,o,a))}))},t.hidePanel=function(e){var t=this.m_UIPanelDic.get(e);if(t){var n=t.node,i=n.getComponent(t.view);i.hide(),t.isRelease?n.active=!1:(n.isValid&&(i.dispose(),n.destroy()),this.m_UIPanelDic.delete(e))}},t.destroyAllPanel=function(){for(var e,t=this.m_UIPanelDic.values();!(e=t.next()).done&&e.value.node.isValid;){e.value.node.getComponent(e.value.view).dispose(),e.value.node.isValid&&e.value.node.destroy()}this.m_UIPanelDic.clear()},t.findPanel=function(e){var t=this.m_UIPanelDic.get(e);if(t)return t.node.getComponent(t.view)},t.findNode=function(e){var t=this.m_UIPanelDic.get(e);if(t)return t.node},U(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),F(Re,"_instance",void 0),Pe=Ee))||Pe),ke=function(e,t,n){F(this,"node",void 0),F(this,"view",void 0),F(this,"isRelease",void 0),this.node=e,this.view=t,this.isRelease=n};e._RF.pop(),e._RF.push({},"a3f8e4g519JCbqBHg3KCpwP","Consts",void 0);var Le,xe=function(){};F(xe,"Width",1334),F(xe,"Height",750),e._RF.pop(),e._RF.push({},"f1bcdp9t1BPdo0rL87xRyba","util",void 0);var Be=t.ccclass,ze=(t.property,Be("util")(Le=function(){function e(){}return e.clone=function(e){if(null===e||"object"!=typeof e)return e;var t={};for(var n in e.constructor===Array&&(t=[]),e)e.hasOwnProperty(n)&&(t[n]=this.clone(e[n]));return t},e.objectToArray=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t},e.arrayToObject=function(e,t){var n={};for(var i in e)e.hasOwnProperty(i)&&e[i][t]&&(n[e[i][t]]=e[i]);return n},e.getWeightRandIndex=function(e,t){for(var n=Math.floor(Math.random()*t),i=0,r=0;r<e.length&&!(n<(i+=e[r]));r++);return r},e.getRandomNFromM=function(e,t){for(var n=[],i=0,r=0;r<t&&!(r>=e+1);){i=this.getRandomInt(0,e);for(var o=0,a=0;a<r;a++)if(n[a]===i){o=1;break}0===o&&(n[r]=i,r++)}return n},e.getStringLength=function(e){for(var t=e,n=0,i=0,r=t.length;i<r;i++){n+=t.charCodeAt(i)<=255?1:2}return Math.ceil(n/2)},e.isEmptyObject=function(e){var t=!0;if(e&&e.constructor===Object){for(var n in e)if(e.hasOwnProperty(n)){t=!1;break}}else t=!1;return t},e.formatNum=function(e){if(e<=0)return"0";var t=Math.round(Math.log(e)/Math.log(1e3));return parseInt((e/Math.pow(1e3,t-1<0?0:t-1)).toString(),10)+["","","K","M","B"][t]},e.isNewDay=function(e){var t=new Date(e),n=new Date,i=t.getFullYear(),r=t.getMonth(),o=t.getDate(),a=n.getFullYear(),s=n.getMonth(),u=n.getDate();return a>i||(s>r||u>o)},e.getPropertyCount=function(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n},e.difference=function(e,t){var n=[];if(e.constructor!==Array||t.constructor!==Array)return n;for(var i=e.length,r=0;r<i;r++)-1===t.indexOf(e[r])&&n.push(e[r]);return n},e.simulationUUID=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},e.trim=function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},e.isNowValid=function(e,t){var n=new Date(e),i=new Date(t),r=!1;if(n.getDate()+""!="NaN"&&i.getDate()+""!="NaN"){var o=new Date;r=o<i&&o>n}return r},e.getDeltaDays=function(e,t){var n=new Date(e),i=new Date(t),r=n.getFullYear(),o=n.getMonth()+1,a=n.getDate(),s=i.getFullYear(),u=i.getMonth()+1,c=i.getDate();e=new Date(r+"/"+o+"/"+a+" GMT+0800").getTime();var l=(t=new Date(s+"/"+u+"/"+c+" GMT+0800").getTime())-e;return Math.floor(l/864e5)},e.getMin=function(e){var t=0;if(e.constructor===Array)for(var n=e.length,i=0;i<n;i++)t=0===i?Number(e[0]):t>Number(e[i])?Number(e[i]):t;return t},e.formatTwoDigits=function(e){return(Array(2).join("0")+e).slice(-2)},e.formatDate=function(e,t){var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var i in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?""+n[i]:("00"+n[i]).substr((""+n[i]).length)));return t},e.getDay=function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},e.formatMoney=function(e){for(var t=["","K","M","G","T","P","E","Z","Y","B","N","D"],n="",i=0;i<t.length;i++){if(!(e>=1e4)){n=Math.floor(e)+t[i];break}e/=1e3}return""===n&&(n=Math.floor(e)+"U"),n},e.formatTimeForSecond=function(e){var t="",n=e%60,i=Math.floor(e/60);i=i<0?0:i;var r=Math.floor(i/60),o=i%60;return r>0&&(t+=r>9?r.toString():"0"+r,t+=":"),t+=o>9?o.toString():"0"+o,t+=":",t+=n>9?n.toString():"0"+n},e.formatTimeForMillisecond=function(e){var t=Math.floor(e/1e3%60),n=Math.floor(e/1e3/60%60);return(n<10?"0"+n:n)+":"+(t<10?"0"+t:t)},e.zip=function(e){var t=pako.gzip(encodeURIComponent(e),{to:"string"});return this.base64encode(t)},e.rand=function(e){for(var t=this.clone(e),n=t.length-1;n>=0;n--){var i=Math.floor(Math.random()*(n+1)),r=t[i];t[i]=t[n],t[n]=r}return t},e.getGlobal=function(e){e&&e.getComponent(y).convertToWorldSpaceAR||i("node: ",e);var t=e.getComponent(y).convertToWorldSpaceAR(b.ZERO);return t.x-=xe.Width/2,t.y-=xe.Height/2,t},e.getGlobalByVec3=function(e){return new b(e.x-xe.Width/2,e.y-xe.Height/2,e.z)},e.getbase64ToArrayBuffer=function(e){for(var t=window.atob(e),n=t.length,i=new Uint8Array(n),r=0;r<n;r++)i[r]=t.charCodeAt(r);return i.buffer},e.clamp=function(e,t,n){return null!=t&&(e=Math.max(e,t)),null!=n&&(e=Math.min(e,n)),e},e.fixNumberByAddZeroAtPrefix=function(e,t){for(var n=t-(e+"").length,i="",r=0;r<n;r++)i+="0";return i+=e},e.distanceSquare=function(e,t,n,i){return(n-e)*(n-e)<7569&&(i-t)*(i-t)<7569},e.checkBodyRange=function(e,t,n,i){return(n-e)*(n-e)<129600&&(i-t)*(i-t)<168100},e.getRandom=function(e,t){return e+Math.random()*(t-e)},e.getRandomInt=function(e,t){return Math.floor(e+Math.random()*(t-e+1))},e.to16=function(e,t,n){void 0===t&&(t=4),void 0===n&&(n="0x");for(var i=e.toString(16);i.length<t;)i="0"+i;return i=n+i},e.getAngle=function(e,t,n,i){var r=Math.atan2(e-n,t-i);return this.R2A(r)},e.R2A=function(e){return 180*e/Math.PI},e.A2R=function(e){return e*Math.PI/180},e.isAndroid=function(){var e=navigator.userAgent;return e.indexOf("Android")>-1||e.indexOf("Adr")>-1},e.isIOS=function(){var e=navigator.userAgent,t=!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),n=e.indexOf("iPad")>-1,i=e.indexOf("iPhone")>-1||e.indexOf("Mac")>-1;return!!(t||n||i)},e}())||Le);e._RF.pop(),e._RF.push({},"9b545vJCU1OAYCCOW97yh7F","Constant",void 0);var Ge,qe,je,Ve,He,We,Ye,Je=function(){};F(Je,"AUDIO_SOUND",{BG:"bg",ADD:"add",OUT:"out",BUTTON:"button",ADD_COMPLETE:"addComplete",OUT_COMPLETE:"outComplete",COUNT_DOWN:"countDown",END_BUTTON:"endButton"}),e._RF.pop(),e._RF.push({},"ad345qlz/JOeI2224UVwFSg","GameItem",void 0);var Ke,Ze,Qe,Xe,$e,et,tt,nt,it,rt,ot,at=t.ccclass,st=t.property,ut=(Ge=at("GameItem"),qe=st(w),je=st(T),Ge((We=z((He=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return B(x(t=e.call.apply(e,[this].concat(i))||this),"bg",We,x(t)),B(x(t),"nameLab",Ye,x(t)),F(x(t),"data",null),t}k(t,e);var n=t.prototype;return n.show=function(e){this.data=e,this.nameLab.string=this.data.name,de.setSpriteFrame($.GameIcon+this.data.icon,this.bg,(function(){}))},n.dispose=function(){this.data=null},t}(r)).prototype,"bg",[qe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ye=z(He.prototype,"nameLab",[je],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ve=He))||Ve);e._RF.pop(),e._RF.push({},"1043aHvzndIapgB+SB8tGPY","GameMainPanel",void 0);var ct,lt,ht,dt=t.ccclass,ft=t.property,pt=(Ke=dt("GameMainPanel"),Ze=ft(_),Qe=ft(_),Xe=ft(_),$e=ft(_),Ke((nt=z((tt=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return B(x(t=e.call.apply(e,[this].concat(i))||this),"btnBack",nt,x(t)),B(x(t),"btnNode",it,x(t)),B(x(t),"itemNode",rt,x(t)),B(x(t),"iconNode",ot,x(t)),t}k(t,e);var n=t.prototype;return n.show=function(){this.btnBack.active="wxApp"!=K.instance.platform;var e=document.getElementById("bg");e&&(e.style.display="none"),this.iconNode.active=K.instance.isAr,this.updatePanel()},n.updatePanel=function(){var e=this,t=C.instance.getVisibleSize().height/xe.Height;this.btnNode.setScale(t,t),de.getUIPrefabRes(le,(function(t,n){if(!t){var i=De.instance.getTableArr(ge);if(i)for(var r=null,o=i.length,a=0;a<o;a++){var s=i[a];if(!e.itemNode)return;(r=e.itemNode.children[a])||((r=u(n)).on(_.EventType.TOUCH_END,e.onClickItem,e),e.itemNode.addChild(r)),r.getComponent(ut).show(s)}}}))},n.onClickItem=function(e){var t=e.currentTarget.getComponent(ut);K.instance.selectGameId=t.data.id,K.instance.GameName=t.data.name,Fe.instance.showPanel(re),this.hidePanel()},n.onClickStart=function(){Fe.instance.showPanel(ce),this.hidePanel()},n.onClickSee=function(){Fe.instance.showPanel(ae),this.hidePanel()},n.release=function(){if(this.itemNode)for(var e,t=this.itemNode.children.length-1;t>=0;t--)(e=this.itemNode.children[t]).off(_.EventType.TOUCH_END,this.onClickItem,this),e.getComponent(ut).dispose(),e.destroy(),e.removeFromParent()},n.hidePanel=function(){fe.instance.playSound(Je.AUDIO_SOUND.BUTTON),Fe.instance.hidePanel(se)},n.dispose=function(){this.release()},n.onClickClose=function(){if(ze.isIOS())Me.instance.reqFunc("hqsjBack");else{if(!window.android)return void console.warn("平台暂无");window.android.hqsjBack()}},t}(Oe)).prototype,"btnBack",[Ze],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=z(tt.prototype,"btnNode",[Qe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rt=z(tt.prototype,"itemNode",[Xe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ot=z(tt.prototype,"iconNode",[$e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=tt))||et);e._RF.pop(),e._RF.push({},"104b7y3clxIzq0uhrLYZdoy","CameraDraw",void 0);var gt,vt,mt=t.ccclass;t.property,mt("text")((ht=lt=function(){function e(){F(this,"isShow",!1),F(this,"callback",void 0),F(this,"width",0),F(this,"height",0),F(this,"post",null),F(this,"camera",null),F(this,"pose",null)}var t=e.prototype;return t.init=function(){var e=this,t=C.instance.getVisibleSize();this.width=t.width||300,this.height=t.height||200;var n,i=document.createElement("video");this.setVideoElementStyle(i),this.pose=new Pose({locateFile:function(e){return"https://cdn.jsdelivr.net/npm/@mediapipe/pose/"+e}}),this.pose.setOptions({selfieMode:!0,modelComplexity:1,smoothLandmarks:!0,enableSegmentation:!0,smoothSegmentation:!0,minDetectionConfidence:.5,minTrackingConfidence:.5}),this.camera=new Camera(i,{onFrame:(n=E(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.pose.send({image:i});case 2:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)}),width:this.width,height:this.height})},t.start=function(e){if(!e&&"function"!=typeof e)throw new Error("start:请传入回调函数!!!");this.pose.onResults(e),this.camera.start()},t.setVideoElementStyle=function(e){e.style.position="fixed",e.style.top="-9999",e.style.left="-9999",e.style.display="none"},U(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),F(lt,"_instance",void 0),ct=ht));e._RF.pop(),e._RF.push({},"10a09om3sZD8q2H50TLwLIc","eventListener",void 0);var yt=t.ccclass,bt=(t.property,yt("oneToOneListener")(gt=function(){function e(){F(this,"supportEvent",{}),F(this,"handle",{}),this.supportEvent=null}var t=e.prototype;return t.on=function(e,t,n){this.handle[e]={handler:t,target:n}},t.off=function(e,t){var n=this.handle[e];n&&n.handler&&n.handler===t&&delete this.handle[e]},t.dispatchEvent=function(e){if(null===this.supportEvent||this.supportEvent.hasOwnProperty(e)){for(var t=this.handle[e],n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);t.handler?t.handler.apply(t.target,n):i("not register "+e+"    callback func")}else a("please add the event into clientEvent.js")},t.setSupportEventList=function(e){if(!(e instanceof Array))return a("supportEvent was not array"),!1;for(var t in this.supportEvent={},e){var n=e[t];this.supportEvent[n]=t}return!0},e}())||gt);yt("eventListener")(vt=function(){function e(){}return e.getBaseClass=function(e){return bt},e}());e._RF.pop(),e._RF.push({},"21a48bRsaJFSYLpGJajLQZB","LayerEnum",void 0);var wt,Tt,_t,Ct="Drag";e._RF.pop(),e._RF.push({},"fe9be+GYUlOwJmQicjTs+S2","LayerManager",void 0);var Nt,St=(0,t.ccclass)("LayerManager")((_t=Tt=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return F(x(t=e.call.apply(e,[this].concat(i))||this),"_layerNodeDic",void 0),F(x(t),"_layerCompDic",void 0),t}k(t,e);var n=t.prototype;return n.init=function(){this._layerNodeDic=new Map,this._layerCompDic=new Map},n.setLayer=function(e,t,n){this._layerNodeDic.set(e,t),this._layerCompDic.set(e,n)},n.addToLayer=function(e,t,n,r){var o=this._layerNodeDic.get(t);o?(o.addChild(e),e.setPosition(n,r)):i("can not find layer: ",t)},n.getLayer=function(e){return this._layerCompDic.get(e)},n.getLayerNode=function(e){return this._layerNodeDic.get(e)},n.clear=function(e){var t=this.getLayer(e);t?t.clear():i("can not find layer: ",e)},U(t,null,[{key:"I",get:function(){return this.instance||(this.instance=new t),this.instance}}]),t}(r),F(Tt,"instance",void 0),wt=_t))||wt;e._RF.pop(),e._RF.push({},"187e98EWtRIY5r1m9D3Xjog","Dragable",void 0);var At,It,Dt,Ot,Pt;(0,t.ccclass)("Dragable")(Nt=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return F(x(t=e.call.apply(e,[this].concat(i))||this),"parent",void 0),t}k(t,e);var n=t.prototype;return n.onLoad=function(){},n.setEnable=function(e){e?this.node.hasEventListener(_.EventType.TOUCH_START)||this.node.on(_.EventType.TOUCH_START,this.onTouchStart,this):this.node.hasEventListener(_.EventType.TOUCH_START)&&this.node.off(_.EventType.TOUCH_START,this.onTouchStart,this)},n.onTouchStart=function(e){this.node.emit(ne.DragStart,this.node),this.node.on(_.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(_.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(_.EventType.TOUCH_CANCEL,this.onTouchCancel,this),this.parent=this.node.parent,this.node.setParent(St.I.getLayerNode(Ct));var t=e.getUILocation(),n=this.node.parent.getComponent(y).convertToNodeSpaceAR(new b(t.x,t.y));this.node.setPosition(n.x,n.y)},n.onTouchMove=function(e){var t=e.getUILocation(),n=this.node.parent.getComponent(y).convertToNodeSpaceAR(new b(t.x,t.y));this.node.setPosition(n.x,n.y),this.node.emit(ne.DragMove,this.node,t.x,t.y)},n.onTouchEnd=function(e){this.node.setParent(this.parent),this.node.off(_.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(_.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(_.EventType.TOUCH_CANCEL,this.onTouchCancel,this);var t=e.getUILocation();this.node.emit(ne.DragEnd,this.node,t.x,t.y)},n.onTouchCancel=function(e){this.node.setParent(this.parent),this.node.off(_.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(_.EventType.TOUCH_END,this.onTouchEnd,this);var t=e.getUILocation();this.node.emit(ne.DragEnd,this.node,t.x,t.y)},n.onDisable=function(){this.node.off(_.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(_.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},t}(r));e._RF.pop(),e._RF.push({},"5a4c82RVRlNb4btzKuZBILm","CoursePanel",void 0);var Rt,Et,Mt,Ut,Ft,kt=t.ccclass,Lt=t.property,xt=(At=kt("CoursePanel"),It=Lt(_),At((Pt=z((Ot=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return B(x(t=e.call.apply(e,[this].concat(i))||this),"tp",Pt,x(t)),t}k(t,e);var n=t.prototype;return n.show=function(){var e=C.instance.getVisibleSize().height/xe.Height;this.tp.setScale(e,e)},n.onClickClose=function(){Fe.instance.showPanel(se),this.hidePanel()},n.onClickPlay=function(){Fe.instance.showPanel(ce),this.hidePanel()},n.hidePanel=function(){fe.instance.playOneShot(Je.AUDIO_SOUND.BUTTON),Fe.instance.hidePanel(this.moduleEum)},t}(Oe)).prototype,"tp",[It],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Dt=Ot))||Dt);e._RF.pop(),e._RF.push({},"4f641ZBAj5IMojKSRkKgDkb","GameOpenPanel",void 0);var Bt,zt,Gt,qt=t.ccclass,jt=t.property,Vt=(Rt=qt("GameOpenPanel"),Et=jt(w),Rt((Ft=z((Ut=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return B(x(t=e.call.apply(e,[this].concat(i))||this),"bg",Ft,x(t)),t}k(t,e);var n=t.prototype;return n.show=function(){var e=K.instance.isAr?K.instance.selectGameId+"_ar":K.instance.selectGameId;de.setSpriteFrame($.OpenBg+e,this.bg)},n.onCLickOpen=function(){Fe.instance.showPanel(ce),this.hidePanel()},n.hidePanel=function(){fe.instance.playSound(Je.AUDIO_SOUND.BUTTON),Fe.instance.hidePanel(this.moduleEum)},n.onClickClose=function(){fe.instance.playSound(Je.AUDIO_SOUND.BUTTON),Fe.instance.showPanel(se),this.hidePanel()},t}(Oe)).prototype,"bg",[Et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Mt=Ut))||Mt);e._RF.pop(),e._RF.push({},"d41282ylT5Gc4ctTtJ3Szc8","EventManager",void 0);var Ht=(0,t.ccclass)("EventManager")((Gt=zt=function(){function e(){F(this,"handlers",{}),F(this,"supportEvent",{})}var t=e.prototype;return t.on=function(e,t,n){var i={handler:t,target:n},r=this.handlers[e];r||(r=[],this.handlers[e]=r);for(var o=0;o<r.length;o++)if(!r[o])return r[o]=i,o;return r.push(i),r.length},t.off=function(e,t,n){var i=this.handlers[e];if(i)for(var r=0;r<i.length;r++){var o=i[r];if(o.handler===t&&(!n||n===o.target)){i.splice(r,1);break}}},t.dispatchEvent=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r,o=this.handlers[e];for(r=1;r<arguments.length;r++);if(o)for(r=0;r<o.length;r++){var a=o[r];a.handler&&a.handler.apply(a.target,n)}},t.setSupportEventList=function(e){if(!(e instanceof Array))return a("supportEvent was not array"),!1;for(var t in this.supportEvent={},e){var n=e[t];this.supportEvent[n]=t}return!0},U(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),F(zt,"_instance",void 0),Bt=Gt))||Bt;e._RF.pop(),e._RF.push({},"280efuXoo9EGIAvdS1njCrX","TimerManager",void 0);var Wt,Yt,Jt,Kt,Zt,Qt,Xt,$t,en,tn,nn,rn,on,an=function(){function e(){}var t=e.prototype;return t.setTimeout=function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){for(var n=e,i=t,r=arguments.length,o=new Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];var s=o;return setTimeout.apply(void 0,[n,i].concat(s))})),t.clearTimeout=function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){clearTimeout(e)})),t.setInterval=function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){for(var n=e,i=t,r=arguments.length,o=new Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];var s=o;return setInterval.apply(void 0,[n,i].concat(s))})),t.clearInterval=function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){clearInterval(e)})),t.wait=function(){var e=E(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){setTimeout(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}();F(an,"_instance",void 0),e._RF.pop(),e._RF.push({},"5018em+GulHiqeHLNk3OrIr","AnswerItem",void 0);var sn,un,cn,ln,hn,dn,fn,pn,gn,vn,mn,yn,bn,wn,Tn,_n,Cn,Nn,Sn,An,In,Dn,On,Pn,Rn,En,Mn,Un,Fn,kn,Ln,xn,Bn,zn,Gn,qn,jn,Vn,Hn,Wn,Yn,Jn=t.ccclass,Kn=t.property,Zn=(Wt=Jn("AnswerItem"),Yt=Kn(T),Jt=Kn(N),Kt=Kn(_),Zt=Kn(w),Qt=Kn(T),Wt((en=z(($t=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return B(x(t=e.call.apply(e,[this].concat(i))||this),"nameLab",en,x(t)),B(x(t),"pro",tn,x(t)),B(x(t),"circle",nn,x(t)),B(x(t),"sp",rn,x(t)),B(x(t),"markLab",on,x(t)),F(x(t),"anim",null),F(x(t),"tween",void 0),F(x(t),"num",void 0),F(x(t),"isTexture",!1),F(x(t),"data",null),F(x(t),"isPlay",!1),F(x(t),"isAnimPlay",!1),t}k(t,e);var n=t.prototype;return n.onLoad=function(){this.anim=this.node.getComponent(S),this.anim.on(A.EventType.FINISHED,this.onAnimEnd,this)},n.show=function(e){this.num=e,this.isTexture?de.setCarIcon($.Icon+e,this.sp):this.nameLab.string=e,this.nameLab.node.active=!this.isTexture,this.sp.node.active=this.isTexture,this.circle.active=!1,this.isAnimPlay=!1,this.markLab.string=""},n.onAnimEnd=function(){this.isAnimPlay=!1,this.isPlay?(this.node.active=!1,Ht.instance.dispatchEvent(ne.UPDATE_ANSWERL)):(Ht.instance.dispatchEvent(ne.UPDATE_ITEM),console.log("选择错误"))},n.playAnim=function(e,t){this.isAnimPlay=!0,this.isPlay=e,e?(this.markLab.string="+"+t,this.anim.play("yesAnim")):(this.markLab.string=""+t,this.anim.play("wrongAnim")),this.circle.active=!0},n.updateTween=function(e){var t=this;if(this.node.active){this.pro.progress=0;var n=this.getTime(e);this.tween||(this.tween=new I(this.pro),this.tween.to(n,{progress:1}).call((function(){t.clearTween()})).start())}},n.getTime=function(e){var t=5;switch(e){case 1:t=5;break;case 2:t=4;break;case 3:t=3}return t},n.clearTween=function(){this.tween&&(this.tween.stop(),this.tween.removeSelf(),this.tween=null)},n.dispose=function(){this.clearTween()},t}(r)).prototype,"nameLab",[Yt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tn=z($t.prototype,"pro",[Jt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nn=z($t.prototype,"circle",[Kt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rn=z($t.prototype,"sp",[Zt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),on=z($t.prototype,"markLab",[Qt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xt=$t))||Xt);e._RF.pop(),e._RF.push({},"5dc08QbVW1OarokieGjrSzY","GameView",void 0);var Qn,Xn,$n,ei=t.ccclass,ti=t.property,ni=(sn=ei("GameView"),un=ti(_),cn=ti(T),ln=ti(T),hn=ti(T),dn=ti(_),fn=ti(_),pn=ti(_),gn=ti(_),vn=ti(_),mn=ti(_),yn=ti(_),bn=ti(_),wn=ti(_),Tn=ti(_),_n=ti(_),Cn=ti(_),Nn=ti(T),Sn=ti(_),An=ti(_),sn((On=z((Dn=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return F(x(t=e.call.apply(e,[this].concat(i))||this),"isOpen",!0),B(x(t),"itemNode",On,x(t)),B(x(t),"scoreLab",Pn,x(t)),B(x(t),"timeLab",Rn,x(t)),B(x(t),"hitNum",En,x(t)),B(x(t),"levelNode",Mn,x(t)),B(x(t),"endNode",Un,x(t)),B(x(t),"bodyRange",Fn,x(t)),B(x(t),"bodyBg1",kn,x(t)),B(x(t),"bodyBg2",Ln,x(t)),B(x(t),"downTimeNode",xn,x(t)),B(x(t),"drawNode",Bn,x(t)),B(x(t),"desNode",zn,x(t)),B(x(t),"guideNode",Gn,x(t)),B(x(t),"bodyNode",qn,x(t)),B(x(t),"twoGameNode",jn,x(t)),B(x(t),"guideBg",Vn,x(t)),B(x(t),"titleName",Hn,x(t)),B(x(t),"titleNode",Wn,x(t)),B(x(t),"titleBg",Yn,x(t)),F(x(t),"_audioSource",null),F(x(t),"time",null),F(x(t),"endTime",void 0),F(x(t),"curLv",void 0),F(x(t),"allScore",0),F(x(t),"hitCount",0),F(x(t),"upLvNUm",0),F(x(t),"itemTime",null),F(x(t),"pauseTime",null),F(x(t),"openDownTime",null),F(x(t),"timeMag",null),F(x(t),"isCheckBody",!1),F(x(t),"isAr",!1),F(x(t),"isBodyPos",!1),F(x(t),"btnTime",null),F(x(t),"answers",null),F(x(t),"data",null),F(x(t),"curIndex",0),F(x(t),"curData",null),F(x(t),"widget",null),F(x(t),"isWrong",!1),F(x(t),"curAnswerArr",null),F(x(t),"selectGameId",void 0),F(x(t),"arWidget",null),F(x(t),"isTopicEnd",!1),t}k(t,e);var n=t.prototype;return n.onLoad=function(){this.widget=[{horizontalCenter:-220,bottom:350},{horizontalCenter:240,bottom:350},{horizontalCenter:-220,bottom:138},{horizontalCenter:240,bottom:138}],this.arWidget=[{horizontalCenter:-268,bottom:402},{horizontalCenter:280,bottom:402},{horizontalCenter:-200,bottom:88},{horizontalCenter:280,bottom:98},{horizontalCenter:34,bottom:38}],this.data=K.instance,this.timeMag=an.instance,this.isAr=this.data.isAr,this.isCheckBody=this.data.isCheckBody,this.isBodyPos=this.data.isBodyPos,this._audioSource=this.node.getComponent(D)},n.onEnable=function(){Ht.instance.on(ne.UPDATE_ITEM,this.updateAllItem,this),Ht.instance.on(ne.UPDATE_ANSWERL,this.updateAnswerl,this)},n.onDisable=function(){Ht.instance.off(ne.UPDATE_ITEM,this.updateAllItem,this),Ht.instance.off(ne.UPDATE_ANSWERL,this.updateAnswerl,this)},n.show=function(){if(this.selectGameId=K.instance.selectGameId,this.answers=[],this.titleNode.active=!1,!K.instance.isGuide&&this.isAr){this.guideNode.active=!0;var e=C.instance.getVisibleSize().height/xe.Height;this.guideBg.setScale(e,e),K.instance.isGuide=!0}else this.updatePanel()},n.updatePanel=function(){this.guideNode.active=!1,this.isAr&&this.openSend(),this.isCheckBody?(this.bodyBg1.active=this.isCheckBody,this.bodyBg2.active=!this.isCheckBody,this.bodyNode.active=!0):this.downTime(),this.twoGameNode.active=!this.isAr,this.isOpen=!0,this.curLv=1,this.endNode.active=!1,this.bodyRange.active=!0,this.updateLv(),this.updateBodyPos()},n.updateAnswerCfgs=function(){var e=De.instance.getLvCfgs(ve,this.selectGameId,this.curLv);e&&(this.answers=e)},n.getOrder=function(e){return function(e){for(var t=0;t<e.length;t++){var n=Math.round(Math.random()*(e.length-1-t))+t,i=[e[n],e[t]];e[t]=i[0],e[n]=i[1]}return e}(e)},n.updateItem=function(){var e=this;if(this.curIndex=Math.random()*this.answers.length>>0,this.curIndex<0||this.curIndex>this.answers.length)return console.log("随机参数错误："+this.curIndex),void(this.curIndex=this.answers.length-1);var t=this.curData=this.answers[this.curIndex];if(t){this.titleName.string=t.title,t.sound&&this.playAnim(t.sound);var n=3!=Number(this.selectGameId)?350:460;this.titleBg.getComponent(y).setContentSize(n,92);var i=[],r=[],o=[];this.curAnswerArr=[];for(var a=t.answer.split(","),s=0;s<a.length;s++)i.push(a[s]),t.isExclude&&(r.push(a[s][0]),o.push(a[s][1])),this.curAnswerArr.push(a[s]);if(t.isRandom){var c=De.instance.getGameIdCfgs(me,this.selectGameId);if(!c)return void console.warn("随机库配置不存在");for(var l=c.split(",");;){var h=l[Math.random()*l.length>>0];if(h&&(-1==i.indexOf(h)&&(t.isExclude?-1==r.indexOf(h[0])&&-1==o.indexOf(h[1])&&i.push(h):i.push(h),4==i.length)))break}}else i=t.topic.split(",");this.isWrong=!1;var d=C.instance.getVisibleSize().height/xe.Height;de.getUIPrefabRes(he,(function(n,r){if(!n){var o,a,s=null,c=null;e.isAr?(a=i,c=e.getOrder(e.arWidget)):(a=e.getOrder(i),c=e.widget);for(var l=a.length,h=0;h<l;h++){if(!e.itemNode)return;var f=a[h],p=c[h];(s=e.itemNode.children[h])||(s=u(r),e.isAr||s.on(_.EventType.TOUCH_END,e.onClickItem,e),e.itemNode.addChild(s));var g=s.getComponent(O);g.horizontalCenter=p.horizontalCenter,!e.isAr&&d<.84?g.bottom=p.bottom-20:g.bottom=p.bottom,s.active=!1,(o=s.getComponent(Zn)).dispose(),o.isTexture=t.isTexture,o.show(f)}}}))}else console.log("配置错误")},n.activeItem=function(){if(this.itemNode){for(var e,t=this.itemNode.children.length,n=0;n<t;n++)(e=this.itemNode.children[n]).active=!0,e.getComponent(Zn).updateTween();this.updateItemTime()}},n.updateAllItem=function(){var e=this;this.clearItemTime(),this.updateItem(),this.pauseTime||(this.pauseTime=this.timeMag.setTimeout((function(){e.activeItem(),e.timeMag.clearTimeout(e.pauseTime),e.pauseTime=null}),1e3))},n.updateItemTime=function(){var e=this;this.isTopicEnd=!1,this.itemTime=this.timeMag.setTimeout((function(){e.isTopicEnd=!0,e.checkTimeEnd()}),5e3)},n.checkTimeEnd=function(){if(this.itemNode){for(var e=!1,t=this.itemNode.children.length,n=0;n<t;n++)this.itemNode.children[n].getComponent(Zn).isAnimPlay&&(e=!0);e||(this.hitCount=0,this.upLvNUm=0,this.hitNum.string="0",this.curLv>1&&(this.curLv=this.curLv-1,this.updateAnswerCfgs()),this.updateLv(),this.updateAllItem(),console.log("未选择全部答案"))}},n.clearItemTime=function(){this.timeMag.clearTimeout(this.itemTime),this.itemTime=null},n.updateAnswerl=function(){if(this.itemNode){for(var e,t,n=!1,i=!1,r=this.itemNode.children.length,o=0;o<r;o++)t=(e=this.itemNode.children[o]).getComponent(Zn),e.active&&this.curData.answer.indexOf(t.num)>-1&&(n=!0),t.isAnimPlay&&(i=!0);5==this.upLvNUm&&3!=this.curLv?(this.curLv+=1,this.upLvNUm=0,this.updateLv(),this.updateAnswerCfgs()):n||this.answers.splice(this.curIndex,1),(!n||!i&&this.isTopicEnd)&&this.updateAllItem()}},n.onClickItem=function(e){console.log("点击成功");var t=e.currentTarget.getComponent(Zn);if(!t.isAnimPlay&&!this.isWrong&&0!=this.curAnswerArr.length)if(this.curData.answer.split(",").indexOf(t.num)>-1){this.playAnim(Je.AUDIO_SOUND.ADD),this.hitCount++,this.upLvNUm++;var n=10+2*this.hitCount;this.allScore+=n,this.hitNum.string=this.hitCount.toString(),this.hitNum.node.getComponent(S).play(),this.scoreLab.string=this.allScore.toString(),t.playAnim(!0,n),this.curAnswerArr.splice(this.curAnswerArr.indexOf(t.num),1)}else this.isWrong=!0,this.playAnim(Je.AUDIO_SOUND.OUT),this.hitCount=0,this.upLvNUm=0,this.curLv>1&&(this.curLv=this.curLv-1,this.updateAnswerCfgs()),this.updateLv(),this.hitNum.string="0",this.scoreLab.string=(this.allScore-20).toString(),t.playAnim(!1,-20),this.allScore=this.allScore-20},n.checkItemTouch=function(e,t){var n,i=this.itemNode.children.length,r=this.curData;if(r)for(var o=r.answer.split(","),a=0;a<i;a++)if((n=this.itemNode.children[a]).active){var s=n.getComponent(Zn);if(this.checkDis(n,e,t)){if(s.isAnimPlay||this.isWrong||0==this.curAnswerArr.length)return;if(o.indexOf(s.num)>-1){this.playAnim(Je.AUDIO_SOUND.ADD),this.hitCount++,this.upLvNUm++;var u=10+2*this.hitCount;this.allScore+=u,this.hitNum.string=this.hitCount.toString(),this.hitNum.node.getComponent(S).play(),this.scoreLab.string=this.allScore.toString(),s.playAnim(!0,u),this.curAnswerArr.splice(this.curAnswerArr.indexOf(s.num),1)}else this.isWrong=!0,this.playAnim(Je.AUDIO_SOUND.OUT),this.hitCount=0,this.upLvNUm=0,this.curLv>1&&(this.curLv=this.curLv-1,this.updateAnswerCfgs()),this.updateLv(),this.hitNum.string="0",this.scoreLab.string=(this.allScore-20).toString(),s.playAnim(!1,-20),this.allScore=this.allScore-20}}},n.downTime=function(){var e=this;this.bodyNode.active=!1,this.downTimeNode.active=!0,this.bodyRange.active=!1;var t=3;this.playAnim(Je.AUDIO_SOUND.COUNT_DOWN),this.downTimeActive(t),this.openDownTime=this.timeMag.setInterval((function(){t--,e.downTimeActive(t),0==t?(e.sendTakeNotes(),e.titleNode.active=!0,e.timeMag.clearInterval(e.openDownTime),e.downTimeNode.active=!1,e.updateAnswerCfgs(),e.updateAllItem(),e.createTime()):e.playAnim(Je.AUDIO_SOUND.COUNT_DOWN)}),1e3)},n.createTime=function(){var e=this;this.endTime=this.getEndTime(),this.timeLab.string=ze.formatTimeForMillisecond(this.endTime-(this.getCurTime()+1e3)),this.time=this.timeMag.setInterval((function(){var t=e.endTime-e.getCurTime();t<0&&(e.timeMag.clearInterval(e.time),Fe.instance.showPanel(oe,e.allScore),e.sendUpdateRecord(1),e.hidePanel()),e.timeLab.string=ze.formatTimeForMillisecond(t)}),1e3)},n.downTimeActive=function(e){for(var t=1;t<4;t++)this.downTimeNode.getChildByName(t+"").active=e==t},n.getEndTime=function(){return(new Date).getTime()+6e4},n.getCurTime=function(){return(new Date).getTime()},n.updateLv=function(){for(var e=0;e<3;e++){var t=this.levelNode.getChildByName("star_"+e);if(t.active=e<this.curLv,t.active)t.getComponent(S).play()}},n.onClickEnd=function(){var e=this;this.endNode.active=!this.endNode.active,this.endNode.active?this.btnTime||(this.btnTime=this.timeMag.setTimeout((function(){e.endNode.active=!1,e.timeMag.clearTimeout(e.btnTime),e.btnTime=null}),2e3)):(this.timeMag.clearTimeout(this.btnTime),this.btnTime=null)},n.checkBody=function(e,t,n){return!!ze.checkBodyRange(e.position.x,e.position.y,t,n)},n.checkDis=function(e,t,n){return!!ze.distanceSquare(e.position.x,e.position.y,t,n)},n.sendTakeNotes=function(){var e=K.instance.gameId;console.log("游戏ID："+e),te.instance.post($.takeNotes,{gameId:e,again:!1},(function(e){e.success&&200==e.code&&(K.instance.logId=e.result,console.debug("开始游戏记录成功： "+e))}))},n.sendUpdateRecord=function(e){var t=this,n=K.instance.logId;console.log("分数："+this.allScore);var i=-(this.getCurTime()-this.getEndTime());te.instance.post($.update,{logId:n,level:e,duration:i.toString(),fraction:this.allScore},(function(n){if(n.success&&200==n.code&&(console.debug("结束游戏记录成功： "+n),e>0)){if(t.sendAwardReceive(),!K.instance.abilityValueRuleId)return;t.sendAcqiore()}}))},n.sendAwardReceive=function(){var e=K.instance.ruleId,t=K.instance.gameId;console.log("规则id: "+e+" 游戏id: "+t),te.instance.post($.doIt,{ruleId:e,gameId:t},(function(e){console.log("code: "+e.code+"success: "+e.success),e.success&&200==e.code&&(console.log("奖励已发放: "+e),K.instance.hqBean=e.result),Ht.instance.dispatchEvent(ne.UPDATE_SCORE)}))},n.sendAcqiore=function(){K.instance.abilityNum="";var e=K.instance.abilityValueRuleId,t=K.instance.gameId,n=this.isAr?14:6,i=K.instance.ageBegin,r=K.instance.ageEnd;console.log("能力规则id: "+e+" 游戏id: "+t+"内容类型: "+n+"年龄下限: "+i+"年龄上限:"+r),te.instance.postJson($.acquire,{abilityValueRuleId:e,contentId:t,contentType:n,ageBegin:i,ageEnd:r},(function(e){console.log("code: "+e.code+"success: "+e.success),e.success&&200==e.code&&(console.log("奖励已发放: "+e),K.instance.abilityNum=e.result),Ht.instance.dispatchEvent(ne.UPDATE_SCORE)}))},n.playAnim=function(e){this._audioSource&&(this._audioSource.stop(),fe.instance.playSound(e,this._audioSource))},n.openSend=function(){if(ze.isIOS())console.log("ios请求摄像头"),this.drawNode.getComponent(y).setAnchorPoint(0,0),this.itemNode.getComponent(y).setAnchorPoint(0,0),Me.instance.reqFunc("sendOpen");else{if(console.log("安卓请求摄像头"),this.drawNode.getComponent(y).setAnchorPoint(0,1),this.itemNode.getComponent(y).setAnchorPoint(0,1),!window.android)return void console.warn("平台暂无");window.android.sendOpen()}var e=this.bodyRange.getComponent(O);e.horizontalCenter=0,e.top=0},n.hideSend=function(){if(ze.isIOS())Me.instance.reqFunc("sendClose");else{if(!window.android)return void console.warn("平台暂无");window.android.sendClose()}},n.updateBodyPos=function(){var e=this,t=C.instance.getVisibleSize(),n=null;window.getImageUrlAndDots=function(i,r){if(e.isOpen){var o=0,a=0,s=!1;if(r){var u=JSON.parse(r),c=i.split(";");if(!u||u.length<1)console.warn("空数据");else{for(var l=0;l<u.length;l++){var h=u[l];if(!e.isOpen)return;if(ze.isIOS()?(o=h.x/Number(c[0])*t.width,a=h.y/Number(c[1])*t.height):(o=(1-h.x/Number(c[0]))*t.width,a=-h.y/Number(c[1])*t.height),e.isBodyPos){var d=e.drawNode.getChildByName("dian"+l);if(!d)continue;d.setPosition(o,a)}l>14&&l<23&&(e.checkItemTouch(o,a),e.isCheckBody&&!s&&(s=!e.checkBody(e.bodyRange,o,a)))}e.isCheckBody&&(s||(e.bodyBg1.active=s,e.bodyBg2.active=!s,n||(console.log("进入开始倒计时"),n=e.timeMag.setTimeout((function(){e.isCheckBody=!1,e.bodyBg1.active=!1,e.bodyBg2.active=!1,e.timeMag.clearTimeout(n),e.downTime(),console.log("开始游戏")}),2e3))))}}else console.log("位置数据为空: "+r)}}},n.onClickClose=function(){fe.instance.playSound(Je.AUDIO_SOUND.BUTTON),Fe.instance.showPanel(se),this.sendUpdateRecord(0),this.hidePanel()},n.hidePanel=function(){this.isOpen=!1,Fe.instance.hidePanel(this.moduleEum)},n.dispose=function(){this.time&&(this.timeMag.clearInterval(this.time),this.time=null),this.pauseTime&&(this.timeMag.clearTimeout(this.pauseTime),this.pauseTime=null),this.openDownTime&&(this.timeMag.clearInterval(this.openDownTime),this.openDownTime=null),this.btnTime&&(this.timeMag.clearTimeout(this.btnTime),this.btnTime=null),this._audioSource&&(this._audioSource.stop(),this._audioSource.destroy(),this._audioSource=null),this.clearItemTime(),this.curLv=0,this.allScore=0,this.hitCount=0,this.timeMag=null,this.data=null,this.answers=null,this.curIndex=0,this.curData=null,this.curAnswerArr=null,this.isAr&&this.hideSend()},t}(Oe)).prototype,"itemNode",[un],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pn=z(Dn.prototype,"scoreLab",[cn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Rn=z(Dn.prototype,"timeLab",[ln],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),En=z(Dn.prototype,"hitNum",[hn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Mn=z(Dn.prototype,"levelNode",[dn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Un=z(Dn.prototype,"endNode",[fn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fn=z(Dn.prototype,"bodyRange",[pn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),kn=z(Dn.prototype,"bodyBg1",[gn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ln=z(Dn.prototype,"bodyBg2",[vn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xn=z(Dn.prototype,"downTimeNode",[mn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Bn=z(Dn.prototype,"drawNode",[yn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),zn=z(Dn.prototype,"desNode",[bn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Gn=z(Dn.prototype,"guideNode",[wn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qn=z(Dn.prototype,"bodyNode",[Tn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),jn=z(Dn.prototype,"twoGameNode",[_n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Vn=z(Dn.prototype,"guideBg",[Cn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Hn=z(Dn.prototype,"titleName",[Nn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Wn=z(Dn.prototype,"titleNode",[Sn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Yn=z(Dn.prototype,"titleBg",[An],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),In=Dn))||In);e._RF.pop(),e._RF.push({},"b08023hl2dPirr+tz3oDtGv","VideoManager",void 0);var ii,ri=t.ccclass,oi=(t.property,"playing"),ai="paused",si="stopped",ui="completed",ci="meta-loaded",li="ready-to-play",hi="error",di="clicked",fi=ri("VideoManager")(($n=Xn=function(){function e(){F(this,"isStopPed",!1),F(this,"videoNode",void 0),F(this,"controls",void 0)}var t=e.prototype;return t.init=function(e){this.videoNode=e},t.setVideoClip=function(e){this.videoNode.remoteURL=e,this.videoNode.node.active=!0},t.playVideo=function(){this.videoNode.play(),this.videoNode.node.active=!0},t.stopVideo=function(){this.videoNode.stop(),this.videoNode.node.active=!1},U(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),F(Xn,"_instance",void 0),Qn=$n))||Qn;e._RF.pop(),e._RF.push({},"d89c5U6FEFJvJfnrqri72Ws","GuidePanel",void 0);var pi,gi,vi,mi,yi,bi,wi,Ti,_i,Ci,Ni,Si,Ai,Ii,Di,Oi,Pi,Ri,Ei,Mi=t.ccclass,Ui=(t.property,Mi("GuidePanel")(ii=function(e){function t(){return e.apply(this,arguments)||this}k(t,e);var n=t.prototype;return n.show=function(){var e=fi.instance;e.controls=!0,e.playVideo()},n.onClickClose=function(){Fe.instance.showPanel(se),this.hidePanel()},n.onClickPlay=function(){Fe.instance.showPanel(ce),this.hidePanel()},n.hidePanel=function(){fi.instance.stopVideo(),Fe.instance.hidePanel(this.moduleEum)},t}(Oe))||ii);e._RF.pop(),e._RF.push({},"ff72b0k8SlMDZWpwKrQ3Nq6","ScorePanel",void 0);var Fi=t.ccclass,ki=t.property,Li=(pi=Fi("ScorePanel"),gi=ki(T),vi=ki(T),mi=ki(T),yi=ki(T),bi=ki(_),wi=ki(_),Ti=ki(_),_i=ki(T),pi((Si=z((Ni=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return B(x(t=e.call.apply(e,[this].concat(i))||this),"num",Si,x(t)),B(x(t),"hq",Ai,x(t)),B(x(t),"ability",Ii,x(t)),B(x(t),"des",Di,x(t)),B(x(t),"bgNode",Oi,x(t)),B(x(t),"abilityNode",Pi,x(t)),B(x(t),"hqNode",Ri,x(t)),B(x(t),"titleName",Ei,x(t)),F(x(t),"score",void 0),t}k(t,e);var n=t.prototype;return n.onLoad=function(){},n.onEnable=function(){Ht.instance.on(ne.UPDATE_SCORE,this.updatePanel,this)},n.onDisable=function(){Ht.instance.off(ne.UPDATE_SCORE,this.updatePanel,this)},n.show=function(e){this.score=e;var t=C.instance.getVisibleSize().height/xe.Height;this.bgNode.setScale(t,t),e>0?fe.instance.playOneShot(Je.AUDIO_SOUND.ADD_COMPLETE):fe.instance.playOneShot(Je.AUDIO_SOUND.OUT_COMPLETE),this.num.string=e.toString(),this.updatePanel(),this.titleName.string=K.instance.GameName},n.updatePanel=function(){console.log("更新积分界面");var e=!!K.instance.abilityValueRuleId&&!!K.instance.abilityNum,t=!!K.instance.hqBean;this.abilityNode.active=e,this.hqNode.active=t;var n=e?80:0;this.hqNode.setPosition(n,-147),n=t?-74:0,this.abilityNode.setPosition(n,-147),t&&(this.hq.string="+"+K.instance.hqBean),e&&(this.ability.string="+"+K.instance.abilityNum),this.des.string=this.score>Number(K.instance.MaxNum)?"恭喜您新的记录产生了!":"恭喜您真棒!"},n.onClickClose=function(){Fe.instance.showPanel(se),this.hidePanel()},n.onClickAgain=function(){Fe.instance.showPanel(re),this.hidePanel()},n.onClickRanking=function(){console.log("暂无排行榜")},n.hidePanel=function(){fe.instance.playOneShot(Je.AUDIO_SOUND.BUTTON),Fe.instance.hidePanel(this.moduleEum)},t}(Oe)).prototype,"num",[gi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ai=z(Ni.prototype,"hq",[vi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ii=z(Ni.prototype,"ability",[mi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Di=z(Ni.prototype,"des",[yi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Oi=z(Ni.prototype,"bgNode",[bi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pi=z(Ni.prototype,"abilityNode",[wi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ri=z(Ni.prototype,"hqNode",[Ti],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ei=z(Ni.prototype,"titleName",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ci=Ni))||Ci);e._RF.pop(),e._RF.push({},"64650l8N21MMoG4D2AoH5YK","UIModule",void 0);var xi,Bi,zi,Gi,qi,ji,Vi,Hi,Wi,Yi=function(){function e(){}return e.init=function(){Fe.instance.registerPanel(ce,ni),Fe.instance.registerPanel(oe,Li),Fe.instance.registerPanel(ae,Ui),Fe.instance.registerPanel(se,pt),Fe.instance.registerPanel(ue,xt),Fe.instance.registerPanel(re,Vt)},e.initPrefab=function(){},e}();e._RF.pop(),e._RF.push({},"22058dkep9EbrevkmVXLs1x","GameMain",void 0);var Ji,Ki=t.ccclass,Zi=t.property;xi=Ki("GameMain"),Bi=Zi(P),zi=Zi(D),Gi=Zi(_),xi((Vi=z((ji=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return B(x(t=e.call.apply(e,[this].concat(i))||this),"video",Vi,x(t)),B(x(t),"audio",Hi,x(t)),B(x(t),"bgNode",Wi,x(t)),t}k(t,e);var n=t.prototype;return n.onLoad=function(){var e=this;Yi.init(),De.instance.loadConfig((function(){e.loadGamePrefab()})),console.log("进入游戏"),K.instance.urlSearch(),de.preload(ce,s),de.preload(le,s),de.preload(he,s),de.preload(oe,s),fe.instance.init(this.audio),this.bgNode.active=!K.instance.isAr,fi.instance.init(this.video),de.loadDir($.OpenBg,(function(){console.log("背景资源加载完成")}))},n.loadGamePrefab=function(){de.loadDir($.GameIcon,(function(){Fe.instance.showPanel(se)}))},n.init=function(){window.app={localConfig:De,CsvManager:Ae,resourceUtil:de,UIManger:Fe,LayerManager:St,ServiceManager:te,util:ze}},n.onState=function(e){switch(e.state){case oi:console.debug("视频播放中");break;case ai:console.debug("视频暂停中");break;case si:console.debug("视频停止中"),fi.instance.isStopPed=!0;break;case di:console.debug("点击视频");break;case ui:console.debug("播放完毕"),fi.instance.isStopPed=!1;break;case ci:console.debug("视频元数据加载完毕"),this.video.play();break;case li:console.debug("视频加载完毕");break;case hi:console.error("视频加载错误")}},t}(r)).prototype,"video",[Bi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Hi=z(ji.prototype,"audio",[zi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Wi=z(ji.prototype,"bgNode",[Gi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qi=ji));e._RF.pop(),e._RF.push({},"615a87h4R9CN7fLYX7tsOrY","PlatformAndroid",void 0),e._RF.pop(),e._RF.push({},"775560sh2hIj5h0qf+p5X5v","Compress",void 0),F(function(){function e(){}var t=e.prototype;return t.find_best_size=function(e){var t=Math.ceil(Math.sqrt(e));if(t>4096)return null;for(var n=1e9,i=0,r=0,o=Math.ceil(e/4096);o<=t;o++){var a=Math.ceil(e/o),s=a*o;if(s<n&&(n=s,r=a,i=o),s==e)break}return{w:r,h:i}},t.str_to_bytes=function(e){for(var t=e.length,n=new Uint8Array(t),i=0;i<t;i++)n[i]=e.charCodeAt(i);return n},t.encode_1px_3byte=function(e){for(var t=Math.ceil(e.length/3),n=this.find_best_size(t),i=new ArrayBuffer(n.w*n.h*4),r=new Uint32Array(i),o=0,a=0;o<t;o++,a+=3)r[o]=e[a+0]<<0|e[a+1]<<8|e[a+2]<<16|4278190080;var s=new Uint8ClampedArray(i);return new ImageData(s,n.w,n.h)},t.compress=function(e,t){var n=this.encode_1px_3byte.bind(this)(e),i=document.createElement("canvas");i.width=n.width,i.height=n.height,i.getContext("2d").putImageData(n,0,0),t(i.toDataURL("image/png"))},t.handle=function(e,t,n){void 0===n&&(n=void 0);var i=this.utf8_to_bytes(e);this.compress(i,(function(e){t&&t.call(n,e)}))},t.utf8_to_bytes=function(e){for(var t=[],n=0,i=0,r=encodeURI(e),o=r.length;n<o;){var a=r.charCodeAt(n);if(37==a){var s=r.substr(n+1,2);a=parseInt(s,16),n+=3}else n++;t[i++]=a}return t},t.unHandle=function(e,t,n){var i=this;void 0===n&&(n=void 0);var r=new Image;r.onload=function(){for(var e=i.uncompress(r),o=[],a=0,s=e.length;a<s;a++)o.push(String.fromCharCode(e[a]));t.call(n,o.join(""))},r.src=e},t.uncompress=function(e){var t=e.width,n=e.height,i=document.createElement("canvas");i.width=t,i.height=n;var r=i.getContext("2d");r.drawImage(e,0,0);var o=r.getImageData(0,0,t,n).data.buffer;return this.decode_1px_3byte(o)},t.decode_1px_3byte=function(e){for(var t=new Uint32Array(e),n=t.length,i=new Uint8Array(3*n),r=0,o=0;o<n;o++){var a=t[o];i[r++]=a,i[r++]=a>>8&255,i[r++]=a>>16&255}return i},U(e,null,[{key:"I",get:function(){return this._I||(this._I=new e),this._I}}]),e}(),"_I",void 0),e._RF.pop(),e._RF.push({},"a90b9WyY3VO/oD/GsVKTD40","SaveHelper",void 0),e._RF.pop(),e._RF.push({},"b10b0hQ+KNIjLLp6mUS7QFN","PlatformOther",void 0),e._RF.pop(),e._RF.push({},"b40c01HzXhJNKR9w33f1MzU","LayerBase",void 0);var Qi,Xi=(0,t.ccclass)("LayerBase")(Ji=function(e){function t(){return e.apply(this,arguments)||this}return k(t,e),t.prototype.clear=function(){},t}(r))||Ji;e._RF.pop(),e._RF.push({},"e5667FaC0lNh5CzGMSbFLs9","IPlatform",void 0),e._RF.pop(),e._RF.push({},"ee185T4Oh9NV4ztLZ79D2wp","LayerDrag",void 0);(0,t.ccclass)("LayerDrag")(Qi=function(e){function t(){return e.apply(this,arguments)||this}return k(t,e),t.prototype.start=function(){},t}(Xi));e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///main.js'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});