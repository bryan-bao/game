System.register("chunks:///main.js",["cc"],(function(){"use strict";var e,t,n,i,o,r,a,s,c,u,l,h,d,f,p,g,v,m,y,b,w,T,_,C,S,N,D,I,P,O;return{setters:[function(R){e=R.cclegacy,t=R._decorator,n=R.sys,i=R.log,o=R.Component,r=R.resources,a=R.error,s=R.Prefab,c=R.instantiate,u=R.find,l=R.SpriteFrame,h=R.isValid,d=R.assetManager,f=R.Texture2D,p=R.assert,g=R.AudioClip,v=R.warn,m=R.clamp01,y=R.UITransform,b=R.Vec3,w=R.Node,T=R.View,_=R.ProgressBar,C=R.Label,S=R.Animation,N=R.AnimationComponent,D=R.Tween,I=R.AudioSource,P=R.Widget,O=R.VideoPlayer}],execute:function(){function R(e,t,n,i,o,r,a){try{var s=e[r](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(i,o)}function A(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var r=e.apply(t,n);function a(e){R(r,i,o,a,s,"next",e)}function s(e){R(r,i,o,a,s,"throw",e)}a(void 0)}))}}function M(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function E(e,t,n){return t&&M(e.prototype,t),n&&M(e,n),e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,F(e,t)}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function x(e,t,n,i,o){var r={};return Object.keys(i).forEach((function(e){r[e]=i[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),r),o&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(o):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var q,z,j;e._RF.push({},"05c37maoztIcqYQxP8Afj1j","configuration",void 0);var V,G,H,W=(0,t.ccclass)("configuration")((j=z=function(){function e(){k(this,"jsonData",null),k(this,"path",null),k(this,"KEY_CONFIG","CarConfig"),k(this,"markSave",!1),k(this,"saveTimer",-1)}var t=e.prototype;return t.start=function(){var e,t=this;(this.jsonData={userId:""},this.path=this.getConfigPath(),n.isNative)?e=jsb.fileUtils.getValueMapFromFile(this.path)[this.KEY_CONFIG]:e=n.localStorage.getItem(this.KEY_CONFIG);if(e&&e.length){e.startsWith("@")&&(e=e.substring(1));try{var i=JSON.parse(e);this.jsonData=i}catch(e){}}this.saveTimer=setInterval((function(){t.scheduleSave()}),500)},t.setConfigDataWithoutSave=function(e,t){var n=this.jsonData.userId;this.jsonData[n]?this.jsonData[n][e]=t:console.error("no account can not save")},t.setConfigData=function(e,t){this.setConfigDataWithoutSave(e,t),this.markSave=!0},t.getConfigData=function(e){var t=this.jsonData.userId;if(this.jsonData[t]){var n=this.jsonData[t][e];return n||""}return i("no account can not load"),""},t.setGlobalData=function(e,t){this.jsonData[e]=t,this.save()},t.getGlobalData=function(e){return this.jsonData[e]},t.setUserId=function(e){this.jsonData.userId=e,this.jsonData[e]||(this.jsonData[e]={}),this.save()},t.getUserId=function(){return this.jsonData.userId},t.scheduleSave=function(){this.markSave&&this.save()},t.markModified=function(){this.markSave=!0},t.save=function(){var e=JSON.stringify(this.jsonData);if(this.markSave=!1,n.isNative){var t={};t[this.KEY_CONFIG]=e,jsb.fileUtils.writeToFile(t,this.path)}else{n.localStorage.setItem(this.KEY_CONFIG,e)}},t.getConfigPath=function(){var e=n.platform,t="";return e===n.OS_WINDOWS?t="src/conf":e===n.OS_LINUX?t="./conf":n.isNative?(t=jsb.fileUtils.getWritablePath(),t+="conf"):t="src/conf",t},t.parseUrl=function(e){if(e&&!("string"==typeof e&&e.length<=0)){var t={};if("string"==typeof e)(e=e.split("?")[1]).split("&").forEach((function(e){var n=e.indexOf("=");if(-1!==n){var i=e.substring(0,n);t[i]=e.substring(n+1)}}));else t=e;t.action&&this.setGlobalData("urlParams",t),t.source&&this.setGlobalData("source",t.source),t.adchannelid&&this.setGlobalData("adchannelid",t.adchannelid)}},e.generateGuestAccount=function(){return""+Date.now()+10},E(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e,this._instance.start()),this._instance}}]),e}(),k(z,"_instance",void 0),q=j))||q;e._RF.pop(),e._RF.push({},"be8fau3T7VJAopcjaiiAlq+","GameData",void 0);var Y=t.ccclass,J=(t.property,Y("GameData")((H=G=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return k(L(t=e.call.apply(e,[this].concat(i))||this),"httpDataMap",new Map),k(L(t),"isWrong",!1),k(L(t),"isSelectPlay",!1),k(L(t),"isTopicEnd",!1),k(L(t),"isGuide",!1),k(L(t),"logId",void 0),k(L(t),"ruleId",void 0),k(L(t),"gameId",void 0),k(L(t),"httpData",void 0),k(L(t),"hqBean",""),k(L(t),"abilityNum",""),k(L(t),"MaxNum",""),k(L(t),"abilityValueRuleId",""),k(L(t),"ageBegin",""),k(L(t),"ageEnd",""),k(L(t),"platform",void 0),k(L(t),"isCheckBody",!0),k(L(t),"isAr",!0),k(L(t),"isBodyPos",!0),t}U(t,e);var n=t.prototype;return n.urlSearch=function(){var e=window.location.href;console.log("链接参数："+e);var t,n,i=e.indexOf("?"),o=e.substr(i+1).split("&");this.httpData=[];for(var r=0;r<o.length;r++)if((i=o[r].indexOf("="))>0){if(t=o[r].substring(0,i),n=o[r].substr(i+1),this.checkNameValue(t,n))continue;"platform"==t&&(this.platform=n),this.httpData.push({name:t,value:n}),this.httpDataMap.set(t,n)}},n.checkNameValue=function(e,t){var n=!1;switch(e){case"gameId":this.gameId=t,n=!0;break;case"abilityValueRuleId":this.abilityValueRuleId=t,n=!0;break;case"ageBegin":this.ageBegin=t,n=!0;break;case"ageEnd":this.ageEnd=t,n=!0;break;case"ruleId":this.ruleId=t,n=!0}return n},n.getValue=function(e){return this.httpDataMap.get(e)},E(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}(o),k(G,"_instance",void 0),V=H))||V);e._RF.pop(),e._RF.push({},"522069n/4VAEKex7zYYYpUd","Path",void 0);t.ccclass,t.property;var K,Z,Q,X=function(){};k(X,"Loading","loading/"),k(X,"Icon","icon/"),k(X,"svnResVideo","https://hqsjapp-1251510006.cos.ap-shanghai.myqcloud.com/game/classroom/video/"),k(X,"serverUrl","http://10.99.29.213:7089"),k(X,"uatServerUrl","https://hqsjtest-api.fangte.com/uat"),k(X,"formalServerUrl","https://hqsj.fangte.com"),k(X,"sitServerUrl","https://hqsjtest-api.fangte.com/sit"),k(X,"takeNotes","/api/gameLog/add"),k(X,"update","/api/gameLog/update"),k(X,"doIt","/api/task/game/doIt"),k(X,"acquire","/api/growup/ability/acquire"),e._RF.pop(),e._RF.push({},"0b9f4FewcRHor00/r6P86Ha","ServiceManager",void 0);var $=t.ccclass,ee=(t.property,$("ServiceManager")((Q=Z=function(){function e(){}var t=e.prototype;return t.post=function(e,t,n){var i=new XMLHttpRequest,o=X.uatServerUrl+e,r=t,a="?";for(var s in r){var c=s+"="+r[s];a+=""==a?c:"&"+c}i.open("POST",o+a),i.timeout=5e3;var u=J.instance.httpData;if(u){for(var l=u.length,h=0;h<l;h++){var d=u[h];i.setRequestHeader(d.name,d.value)}i.onreadystatechange=function(){if(console.log("状态status: "+i.status+" 状态readyState:"+i.readyState),4===i.readyState&&200==i.status){var e=i.responseText;console.log("响应参数"),console.log(e),n&&n(JSON.parse(e))}},i.send()}else console.warn("链接端数据未发送")},t.postJson=function(e,t,n){var i=new XMLHttpRequest,o=X.uatServerUrl+e;i.open("POST",o,!0),i.setRequestHeader("content-type","application/json"),i.timeout=5e3;var r=J.instance.httpData;if(r){for(var a=r.length,s=0;s<a;s++){var c=r[s];console.log("请求头："+c.name+"参数："+c.value),i.setRequestHeader(c.name,c.value)}i.onreadystatechange=function(){if(console.log("状态status: "+i.status+" 状态readyState:"+i.readyState),4===i.readyState&&200==i.status){var e=i.responseText;console.log("响应参数"),console.log(e),console.log(JSON.parse(e)),n&&n(JSON.parse(e))}},i.send(JSON.stringify(t))}else console.warn("链接端数据未发送")},t.get=function(e,t,n){var i=new XMLHttpRequest,o=X.formalServerUrl+e;i.open("GET",o+t),i.timeout=5e3;var r=J.instance.httpData;if(r){for(var a=r.length,s=0;s<a;s++){var c=r[s];i.setRequestHeader(c.name,c.value)}i.onreadystatechange=function(){if(console.log("状态status: "+i.status),4===i.readyState&&200==i.status){var e=i.responseText;console.log("响应参数"),console.log(e),n&&n(JSON.parse(e))}},i.send()}else console.warn("链接端数据未发送")},E(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),k(Z,"_instance",void 0),K=Q))||K);e._RF.pop(),e._RF.push({},"0dc9dlmYRRCQ6UIQuffTBUa","EventType",void 0);var te="DragStart",ne="DragMove",ie="DragEnd",oe="UpdateItem",re="CheckActive",ae="updateScore",se="checkTimeEnd";e._RF.pop(),e._RF.push({},"0fc99z5iRJB7Z+B0jbAOes4","UIModuleEnum",void 0);var ce,ue="main/ScorePanel",le="main/GuidePanel",he="main/GameMainPanel",de="main/CoursePanel",fe="main/GameView",pe="main/GameItem";e._RF.pop(),e._RF.push({},"aebeeEGJRZGbK315QTzsoll","resourceUtil",void 0);var ge=(0,t.ccclass)("resourceUtil")(ce=function(){function e(){}return e.loadRes=function(e,t,n){var i=r.get(e,t);i&&n?n(null,i):t?r.load(e,t,(function(e,t){if(e)return a(e.message||e),void(n&&n(e,t));n&&n(e,t)})):r.load(e,(function(e,t){if(e)return a(e.message||e),void(n&&n(e,t));n&&n(e,t)}))},e.preload=function(e,t){r.preload("prefab/"+e,t)},e.getMap=function(e,t){var n="map";n+=e>=100?e:e>=10?"0"+e:"00"+e,this.loadRes("map/config/"+n,null,(function(e,n){if(e)t(e,n);else{var i=n,o="";if(i._file){window.LZString&&(o=window.LZString.decompressFromEncodedURIComponent(i._file));var r=JSON.parse(o);t(null,r)}else if(i.text){window.LZString&&(o=window.LZString.decompressFromEncodedURIComponent(i.text));var a=JSON.parse(o);t(null,a)}else if(i.json)t(null,i.json);else{var s=new Error("failed");t(s,null)}}}))},e.getMapObjs=function(e,t,n,i){for(var o=[],a=0;a<t.length;a++)o.push("map/"+e+"/"+t[a]);r.load(o,s,n,i)},e.getUIPrefabRes=function(e,t){this.loadRes("prefab/"+e,s,t)},e.createUI=function(e,t,n){this.getUIPrefabRes(e,(function(e,i){if(e)console.error("界面加载失败");else{var o=c(i);o.setPosition(0,0,0),n||(n=u("Canvas/GamePanel")),n.getChildByName(o.name)||n.addChild(o),t&&t(null,o)}}))},e.getCarsBatch=function(e,t,n){for(var i=[],o=0;o<e.length;o++)i.push("prefab/car/car"+e[o]);for(var a=0;a<i.length;a++){var c=i[a];t?r.load(c,s,t,n):r.load(c,s,n)}},e.getUICar=function(e,t){this.loadRes("prefab/ui/car/uiCar"+e,s,t)},e.getCar=function(e,t){this.loadRes("prefab/car/car"+e,s,t)},e.setCarIcon=function(e,t,n){var i="texture/"+e;this.setSpriteFrame(i,t,n)},e.getJsonData=function(e,t){r.load("datas/"+e,(function(e,n){if(e)a(e.message||e);else{var i=n;if(i.json)t(e,i.json);else{var o=new Error("failed!!!");t(o,null)}}}))},e.getData=function(e,t){r.load("config/"+e,(function(e,n){if(e)a(e.message||e);else{var i=n.text;i?t(e,i):r.load(n.nativeUrl,(function(e,n){t(e,i=n)}))}}))},e.setSpriteFrame=function(e,t,n){this.loadRes(e+"/spriteFrame",l,(function(i,o){if(i)return console.error("set sprite frame failed! err:",e,i),void(n&&n(i,o));t&&h(t)&&(t.spriteFrame=o,n&&n(null,o))}))},e.setRemoteImage=function(e,t,n){if(e&&e.startsWith("http")){d.loadAny([{url:e,type:"png"}],null,(function(t,i){if(t)return console.error("set avatar failed! err:",e,t),void n(t,i);var o=new f;o.image=i;var r=new l;r.texture=o,n&&n(null,r)}))}},e.setGameIcon=function(e,t,n){e.startsWith("http")?this.setRemoteImage(e,t,n):this.setSpriteFrame("gamePackage/textures/icons/games/"+e,t,n)},e.loadRemote=function(e,t){d.loadRemote(e,(function(n,i){n?console.error("set avatar failed! err:",e,n):t(n,i)}))},e.loadScene=function(e,t){r.loadScene(e,(function(e,n){e?console.error("场景加载失败"):t&&t(e,n)}))},e.loadDir=function(e,t){r.loadDir(e,(function(e,n){e?console.error("目录资源加载失败"):t&&t(e,n)}))},e.getCustomer=function(e,t){this.loadRes("gamePackage/map/customer/customer"+e,s,t)},e.setCustomerIcon=function(e,t,n){var i="gamePackage/texture/head/head"+e;this.setSpriteFrame(i,t,n)},e.getEffect=function(e,t){this.loadRes("prefab/effect/"+e,s,t)},e}())||ce;e._RF.pop(),e._RF.push({},"e478cuMHJdIHa5fP3m5UZ7S","audioManager",void 0);var ve=function(){function e(){k(this,"soundVolume",1)}var t=e.prototype;return t.init=function(t){this.soundVolume=this.getConfiguration(!1)?1:0,e._audioSource=t},t.getConfiguration=function(e){var t;return void 0===(t=e?W.instance.getGlobalData("music"):W.instance.getGlobalData("sound"))||"true"===t},t.playMusic=function(t){var n=e._audioSource;p(n,"AudioManager not inited!"),n.loop=t,!n.playing&&t?n.play():n.pause()},t.playSound=function(t,n,i){var o;void 0===i&&(i=!1),o=n||e._audioSource;ge.loadRes("audio/sound/"+t,g,(function(e,t){e?v("load audioClip failed: ",e):(o.clip=t,o.loop=i,o.play())}))},t.playOneShot=function(t,n,i){var o,r=this;void 0===i&&(i=!1),o=n||e._audioSource;var a="audio/sound/";i&&(a="audio/music/",o.loop=i),ge.loadRes(a+t,g,(function(e,t){e?v("load audioClip failed: ",e):o.playOneShot(t,o.volume?r.soundVolume/o.volume:0)}))},t.setMusicVolume=function(t,n){var i=n||e._audioSource;p(i,"AudioManager not inited!"),t=m(t),i.volume=t},t.setSoundVolume=function(e){this.soundVolume=e},t.openMusic=function(){this.setMusicVolume(.8),W.instance.setGlobalData("music","true")},t.closeMusic=function(){this.setMusicVolume(0),W.instance.setGlobalData("music","false")},t.openSound=function(){this.setSoundVolume(1),W.instance.setGlobalData("sound","true")},t.closeSound=function(){this.setSoundVolume(0),W.instance.setGlobalData("sound","false")},E(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}();k(ve,"_instance",void 0),k(ve,"_audioSource",void 0),e._RF.pop(),e._RF.push({},"60533HLjDVKM4hKMIfh75fg","PanelBase",void 0);var me=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return k(L(t=e.call.apply(e,[this].concat(i))||this),"moduleEum",void 0),k(L(t),"panelLayer",void 0),t}U(t,e);var n=t.prototype;return n.start=function(){},n.show=function(e){},n.hide=function(){},n.dispose=function(){},t}(o);e._RF.pop(),e._RF.push({},"c678338DOdGbalFjq+Q/3Qk","PlatformIos",void 0);var ye,be,we,Te=function(){function e(){}var t=e.prototype;return t.hasRegistFunc=function(e){return window&&window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers[e]},t.reqFunc=function(e,t,n){window.webkit.messageHandlers[e].postMessage({})},t.setResFunc=function(e,t){window[e]||(window[e]=t)},t.clearResFunc=function(e){window[e]=void 0},E(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}();k(Te,"_instance",void 0),e._RF.pop(),e._RF.push({},"5df7c/B/SpAO5q621xAbDrw","UIManger",void 0);var _e=t.ccclass,Ce=(t.property,_e("UIManger")((we=be=function(){function e(){k(this,"m_UIPanelDic",new Map),k(this,"m_UIPanel",new Map)}var t=e.prototype;return t.getPanel=function(){return this.m_UIPanel},t.registerPanel=function(e,t,n){void 0===n&&(n=!1),this.m_UIPanel.set(e,{clsPanel:t,isRelease:n})},t.showPanel=function(e,t,n){var i=this,o=this.m_UIPanel.get(e),r=o.clsPanel,a=o.isRelease;if(!r)return console.error("没有注册的界面");var s=this.m_UIPanelDic.get(e),c=e.lastIndexOf("/"),u=e.slice(c+1);if(s){if(!s.node||!s.view)return void console.error("找不到对应的Panel类");var l=s.node.getComponent(u);s.node.setSiblingIndex(-1),l.show(t)}else ge.createUI(e,(function(o,s){var c=s.getComponent(u);c.show&&c.show(t),c.moduleEum=e,s.setSiblingIndex(-1),n&&n(c),i.m_UIPanelDic.set(e,new Se(s,r,a))}))},t.hidePanel=function(e){var t=this.m_UIPanelDic.get(e);if(t){var n=t.node,i=n.getComponent(t.view);i.hide(),t.isRelease?n.active=!1:(n.isValid&&(i.dispose(),n.destroy()),this.m_UIPanelDic.delete(e))}},t.destroyAllPanel=function(){for(var e,t=this.m_UIPanelDic.values();!(e=t.next()).done&&e.value.node.isValid;){e.value.node.getComponent(e.value.view).dispose(),e.value.node.isValid&&e.value.node.destroy()}this.m_UIPanelDic.clear()},t.findPanel=function(e){var t=this.m_UIPanelDic.get(e);if(t)return t.node.getComponent(t.view)},t.findNode=function(e){var t=this.m_UIPanelDic.get(e);if(t)return t.node},E(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),k(be,"_instance",void 0),ye=we))||ye),Se=function(e,t,n){k(this,"node",void 0),k(this,"view",void 0),k(this,"isRelease",void 0),this.node=e,this.view=t,this.isRelease=n};e._RF.pop(),e._RF.push({},"a3f8e4g519JCbqBHg3KCpwP","Consts",void 0);var Ne,De=function(){};k(De,"Width",1334),k(De,"Height",750),e._RF.pop(),e._RF.push({},"f1bcdp9t1BPdo0rL87xRyba","util",void 0);var Ie=t.ccclass,Pe=(t.property,Ie("util")(Ne=function(){function e(){}return e.clone=function(e){if(null===e||"object"!=typeof e)return e;var t={};for(var n in e.constructor===Array&&(t=[]),e)e.hasOwnProperty(n)&&(t[n]=this.clone(e[n]));return t},e.objectToArray=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t},e.arrayToObject=function(e,t){var n={};for(var i in e)e.hasOwnProperty(i)&&e[i][t]&&(n[e[i][t]]=e[i]);return n},e.getWeightRandIndex=function(e,t){for(var n=Math.floor(Math.random()*t),i=0,o=0;o<e.length&&!(n<(i+=e[o]));o++);return o},e.getRandomNFromM=function(e,t){for(var n=[],i=0,o=0;o<t&&!(o>=e+1);){i=this.getRandomInt(0,e);for(var r=0,a=0;a<o;a++)if(n[a]===i){r=1;break}0===r&&(n[o]=i,o++)}return n},e.getStringLength=function(e){for(var t=e,n=0,i=0,o=t.length;i<o;i++){n+=t.charCodeAt(i)<=255?1:2}return Math.ceil(n/2)},e.isEmptyObject=function(e){var t=!0;if(e&&e.constructor===Object){for(var n in e)if(e.hasOwnProperty(n)){t=!1;break}}else t=!1;return t},e.formatNum=function(e){if(e<=0)return"0";var t=Math.round(Math.log(e)/Math.log(1e3));return parseInt((e/Math.pow(1e3,t-1<0?0:t-1)).toString(),10)+["","","K","M","B"][t]},e.isNewDay=function(e){var t=new Date(e),n=new Date,i=t.getFullYear(),o=t.getMonth(),r=t.getDate(),a=n.getFullYear(),s=n.getMonth(),c=n.getDate();return a>i||(s>o||c>r)},e.getPropertyCount=function(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n},e.difference=function(e,t){var n=[];if(e.constructor!==Array||t.constructor!==Array)return n;for(var i=e.length,o=0;o<i;o++)-1===t.indexOf(e[o])&&n.push(e[o]);return n},e.simulationUUID=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},e.trim=function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},e.isNowValid=function(e,t){var n=new Date(e),i=new Date(t),o=!1;if(n.getDate()+""!="NaN"&&i.getDate()+""!="NaN"){var r=new Date;o=r<i&&r>n}return o},e.getDeltaDays=function(e,t){var n=new Date(e),i=new Date(t),o=n.getFullYear(),r=n.getMonth()+1,a=n.getDate(),s=i.getFullYear(),c=i.getMonth()+1,u=i.getDate();e=new Date(o+"/"+r+"/"+a+" GMT+0800").getTime();var l=(t=new Date(s+"/"+c+"/"+u+" GMT+0800").getTime())-e;return Math.floor(l/864e5)},e.getMin=function(e){var t=0;if(e.constructor===Array)for(var n=e.length,i=0;i<n;i++)t=0===i?Number(e[0]):t>Number(e[i])?Number(e[i]):t;return t},e.formatTwoDigits=function(e){return(Array(2).join("0")+e).slice(-2)},e.formatDate=function(e,t){var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var i in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?""+n[i]:("00"+n[i]).substr((""+n[i]).length)));return t},e.getDay=function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},e.formatMoney=function(e){for(var t=["","K","M","G","T","P","E","Z","Y","B","N","D"],n="",i=0;i<t.length;i++){if(!(e>=1e4)){n=Math.floor(e)+t[i];break}e/=1e3}return""===n&&(n=Math.floor(e)+"U"),n},e.formatTimeForSecond=function(e){var t="",n=e%60,i=Math.floor(e/60);i=i<0?0:i;var o=Math.floor(i/60),r=i%60;return o>0&&(t+=o>9?o.toString():"0"+o,t+=":"),t+=r>9?r.toString():"0"+r,t+=":",t+=n>9?n.toString():"0"+n},e.formatTimeForMillisecond=function(e){var t=Math.floor(e/1e3%60),n=Math.floor(e/1e3/60%60);return(n<10?"0"+n:n)+":"+(t<10?"0"+t:t)},e.zip=function(e){var t=pako.gzip(encodeURIComponent(e),{to:"string"});return this.base64encode(t)},e.rand=function(e){for(var t=this.clone(e),n=t.length-1;n>=0;n--){var i=Math.floor(Math.random()*(n+1)),o=t[i];t[i]=t[n],t[n]=o}return t},e.getGlobal=function(e){e&&e.getComponent(y).convertToWorldSpaceAR||i("node: ",e);var t=e.getComponent(y).convertToWorldSpaceAR(b.ZERO);return t.x-=De.Width/2,t.y-=De.Height/2,t},e.getGlobalByVec3=function(e){return new b(e.x-De.Width/2,e.y-De.Height/2,e.z)},e.getbase64ToArrayBuffer=function(e){for(var t=window.atob(e),n=t.length,i=new Uint8Array(n),o=0;o<n;o++)i[o]=t.charCodeAt(o);return i.buffer},e.clamp=function(e,t,n){return null!=t&&(e=Math.max(e,t)),null!=n&&(e=Math.min(e,n)),e},e.fixNumberByAddZeroAtPrefix=function(e,t){for(var n=t-(e+"").length,i="",o=0;o<n;o++)i+="0";return i+=e},e.distanceSquare=function(e,t,n,i){return(n-e)*(n-e)<7569&&(i-t)*(i-t)<7569},e.checkBodyRange=function(e,t,n,i){return(n-e)*(n-e)<129600&&(i-t)*(i-t)<168100},e.getRandom=function(e,t){return e+Math.random()*(t-e)},e.getRandomInt=function(e,t){return Math.floor(e+Math.random()*(t-e+1))},e.to16=function(e,t,n){void 0===t&&(t=4),void 0===n&&(n="0x");for(var i=e.toString(16);i.length<t;)i="0"+i;return i=n+i},e.getAngle=function(e,t,n,i){var o=Math.atan2(e-n,t-i);return this.R2A(o)},e.R2A=function(e){return 180*e/Math.PI},e.A2R=function(e){return e*Math.PI/180},e.isAndroid=function(){var e=navigator.userAgent;return e.indexOf("Android")>-1||e.indexOf("Adr")>-1},e.isIOS=function(){var e=navigator.userAgent,t=!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),n=e.indexOf("iPad")>-1,i=e.indexOf("iPhone")>-1||e.indexOf("Mac")>-1;return!!(t||n||i)},e}())||Ne);e._RF.pop(),e._RF.push({},"9b545vJCU1OAYCCOW97yh7F","Constant",void 0);var Oe,Re,Ae,Me,Ee,ke,Ue,Fe=function(){};k(Fe,"AUDIO_SOUND",{BG:"bg",ADD:"add",OUT:"out",BUTTON:"button",ADD_COMPLETE:"addComplete",OUT_COMPLETE:"outComplete",COUNT_DOWN:"countDown",END_BUTTON:"endButton"}),e._RF.pop(),e._RF.push({},"1043aHvzndIapgB+SB8tGPY","GameMainPanel",void 0);var Le,Be,xe,qe=t.ccclass,ze=t.property,je=(Oe=qe("GameMainPanel"),Re=ze(w),Ae=ze(w),Oe((ke=x((Ee=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return B(L(t=e.call.apply(e,[this].concat(i))||this),"btnBack",ke,L(t)),B(L(t),"guideNode",Ue,L(t)),t}U(t,e);var n=t.prototype;return n.show=function(){this.btnBack.active="wxApp"!=J.instance.platform;var e=document.getElementById("bg");e&&(e.style.display="none"),this.guideNode.active=J.instance.isAr},n.onClickStart=function(){Ce.instance.showPanel(fe),this.hidePanel()},n.onClickSee=function(){Ce.instance.showPanel(le),this.hidePanel()},n.onClickGuide=function(){Ce.instance.showPanel(de),this.hidePanel()},n.onClickClose=function(){if(Pe.isIOS())Te.instance.reqFunc("hqsjBack");else{if(!window.android)return void console.warn("平台暂无");window.android.hqsjBack()}},n.hidePanel=function(){ve.instance.playSound(Fe.AUDIO_SOUND.BUTTON),Ce.instance.hidePanel(he)},t}(me)).prototype,"btnBack",[Re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ue=x(Ee.prototype,"guideNode",[Ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Me=Ee))||Me);e._RF.pop(),e._RF.push({},"104b7y3clxIzq0uhrLYZdoy","CameraDraw",void 0);var Ve,Ge,He=t.ccclass;t.property,He("text")((xe=Be=function(){function e(){k(this,"isShow",!1),k(this,"callback",void 0),k(this,"width",0),k(this,"height",0),k(this,"post",null),k(this,"camera",null),k(this,"pose",null)}var t=e.prototype;return t.init=function(){var e=this,t=T.instance.getVisibleSize();this.width=t.width||300,this.height=t.height||200;var n,i=document.createElement("video");this.setVideoElementStyle(i),this.pose=new Pose({locateFile:function(e){return"https://cdn.jsdelivr.net/npm/@mediapipe/pose/"+e}}),this.pose.setOptions({selfieMode:!0,modelComplexity:1,smoothLandmarks:!0,enableSegmentation:!0,smoothSegmentation:!0,minDetectionConfidence:.5,minTrackingConfidence:.5}),this.camera=new Camera(i,{onFrame:(n=A(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.pose.send({image:i});case 2:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)}),width:this.width,height:this.height})},t.start=function(e){if(!e&&"function"!=typeof e)throw new Error("start:请传入回调函数!!!");this.pose.onResults(e),this.camera.start()},t.setVideoElementStyle=function(e){e.style.position="fixed",e.style.top="-9999",e.style.left="-9999",e.style.display="none"},E(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),k(Be,"_instance",void 0),Le=xe));e._RF.pop(),e._RF.push({},"10a09om3sZD8q2H50TLwLIc","eventListener",void 0);var We=t.ccclass,Ye=(t.property,We("oneToOneListener")(Ve=function(){function e(){k(this,"supportEvent",{}),k(this,"handle",{}),this.supportEvent=null}var t=e.prototype;return t.on=function(e,t,n){this.handle[e]={handler:t,target:n}},t.off=function(e,t){var n=this.handle[e];n&&n.handler&&n.handler===t&&delete this.handle[e]},t.dispatchEvent=function(e){if(null===this.supportEvent||this.supportEvent.hasOwnProperty(e)){for(var t=this.handle[e],n=[],o=1;o<arguments.length;o++)n.push(arguments[o]);t.handler?t.handler.apply(t.target,n):i("not register "+e+"    callback func")}else a("please add the event into clientEvent.js")},t.setSupportEventList=function(e){if(!(e instanceof Array))return a("supportEvent was not array"),!1;for(var t in this.supportEvent={},e){var n=e[t];this.supportEvent[n]=t}return!0},e}())||Ve);We("eventListener")(Ge=function(){function e(){}return e.getBaseClass=function(e){return Ye},e}());e._RF.pop(),e._RF.push({},"21a48bRsaJFSYLpGJajLQZB","LayerEnum",void 0);var Je,Ke,Ze,Qe="Drag";e._RF.pop(),e._RF.push({},"fe9be+GYUlOwJmQicjTs+S2","LayerManager",void 0);var Xe,$e=(0,t.ccclass)("LayerManager")((Ze=Ke=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return k(L(t=e.call.apply(e,[this].concat(i))||this),"_layerNodeDic",void 0),k(L(t),"_layerCompDic",void 0),t}U(t,e);var n=t.prototype;return n.init=function(){this._layerNodeDic=new Map,this._layerCompDic=new Map},n.setLayer=function(e,t,n){this._layerNodeDic.set(e,t),this._layerCompDic.set(e,n)},n.addToLayer=function(e,t,n,o){var r=this._layerNodeDic.get(t);r?(r.addChild(e),e.setPosition(n,o)):i("can not find layer: ",t)},n.getLayer=function(e){return this._layerCompDic.get(e)},n.getLayerNode=function(e){return this._layerNodeDic.get(e)},n.clear=function(e){var t=this.getLayer(e);t?t.clear():i("can not find layer: ",e)},E(t,null,[{key:"I",get:function(){return this.instance||(this.instance=new t),this.instance}}]),t}(o),k(Ke,"instance",void 0),Je=Ze))||Je;e._RF.pop(),e._RF.push({},"187e98EWtRIY5r1m9D3Xjog","Dragable",void 0);var et;(0,t.ccclass)("Dragable")(Xe=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return k(L(t=e.call.apply(e,[this].concat(i))||this),"parent",void 0),t}U(t,e);var n=t.prototype;return n.onLoad=function(){},n.setEnable=function(e){e?this.node.hasEventListener(w.EventType.TOUCH_START)||this.node.on(w.EventType.TOUCH_START,this.onTouchStart,this):this.node.hasEventListener(w.EventType.TOUCH_START)&&this.node.off(w.EventType.TOUCH_START,this.onTouchStart,this)},n.onTouchStart=function(e){this.node.emit(te,this.node),this.node.on(w.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(w.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(w.EventType.TOUCH_CANCEL,this.onTouchCancel,this),this.parent=this.node.parent,this.node.setParent($e.I.getLayerNode(Qe));var t=e.getUILocation(),n=this.node.parent.getComponent(y).convertToNodeSpaceAR(new b(t.x,t.y));this.node.setPosition(n.x,n.y)},n.onTouchMove=function(e){var t=e.getUILocation(),n=this.node.parent.getComponent(y).convertToNodeSpaceAR(new b(t.x,t.y));this.node.setPosition(n.x,n.y),this.node.emit(ne,this.node,t.x,t.y)},n.onTouchEnd=function(e){this.node.setParent(this.parent),this.node.off(w.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(w.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(w.EventType.TOUCH_CANCEL,this.onTouchCancel,this);var t=e.getUILocation();this.node.emit(ie,this.node,t.x,t.y)},n.onTouchCancel=function(e){this.node.setParent(this.parent),this.node.off(w.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(w.EventType.TOUCH_END,this.onTouchEnd,this);var t=e.getUILocation();this.node.emit(ie,this.node,t.x,t.y)},n.onDisable=function(){this.node.off(w.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(w.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},t}(o));e._RF.pop(),e._RF.push({},"740d26+WxhIWqfFv0nSwUuT","CsvManager",void 0);var tt,nt,it,ot=t.ccclass,rt=[",",";","\t","|","^"],at=["\r\n","\r","\n"],st=function(e,t,n,i){return n instanceof Array?"number"===n[t]?Number(i[t]):"boolean"===n[t]?"true"===i[t]||"t"===i[t]||"1"===i[t]:i[t]:isNaN(Number(e))?"false"==e||"true"==e||"t"==e||"f"==e?"true"===i[t]||"t"===i[t]||"1"===i[t]:i[t]:Number(i[t])},ct={STANDARD_DECODE_OPTS:{skip:0,limit:!1,header:!1,cast:!1,comment:""},STANDARD_ENCODE_OPTS:{delimiter:rt[0],newline:at[0],skip:0,limit:!1,header:!1},quoteMark:'"',doubleQuoteMark:'""',quoteRegex:/"/g,opts:{},assign:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Array.prototype.slice.call(arguments);for(var i=t[0],o=t.slice(1),r=0,a=o.length;r<a;r++)for(var s in o[r])i[s]=o[r][s];return i},map:function(e,t){for(var n=[],i=0,o=e.length;i<o;i++)n[i]=t(e[i],i);return n},getType:function(e){return Object.prototype.toString.call(e).slice(8,-1)},getLimit:function(e,t){return!1===e?t:1},buildObjectConstructor:function(e,t,n){return function(i){var o={},r=function(e,t){return o[e]=t};return n?e.forEach((function(e,o){r(e,st(t[o],o,n,i))})):e.forEach((function(e,n){r(e,st(t[n],n,null,i))})),o}},buildArrayConstructor:function(e,t,n){return function(i){var o=new Array(t.length),r=function(e,t){return o[e]=t};return n?e.forEach((function(e,o){r(e,st(t[o],o,n,i))})):e.forEach((function(e,n){r(e,st(t[n],n,null,i))})),o}},frequency:function(e,t,n){void 0===n&&(n=!1);for(var i=0,o=0,r=this.getLimit(n,e.length);o<r&&-1!==(o=e.indexOf(t,o));)o+=1,i++;return i},mostFrequent:function(e,t,n){for(var i="",o=t.length-1;o>=0;o--)this.frequency(e,t[o],n)>0&&(i=t[o]);return i||t[0]},unsafeParse:function(e,t,n){var i,o,r=e.split(t.newline);function a(e){var n=e.shift();if(n.indexOf('"')>=0){for(var i=0,o=0,r=0;e.length>0&&(-1!==(i=n.indexOf('"',o))||r%2!=0);)-1!==i?(o=i+1,r++):n=n+t.newline+e.shift();var a,s=[],c=0,u=0,l=0,h=n.length;for(var d in n)if(n.hasOwnProperty(d)){var f=parseInt(d),p=n[d];0===f&&'"'===p&&(c++,u=1),'"'===p&&(c++,n[f-1]===t.delimiter&&u===f&&u++),'"'===p&&c%2==0&&(n[f+1]!==t.delimiter&&f+1!==h||(l=f,a=n.substring(u,l),s.push(a),l=u=l+2)),p===t.delimiter&&c%2==0&&((l=f)>u?(a=n.substring(u,l),s.push(a),l=u=l+1):l===u&&(s.push(""),l=u=l+1))}return(l=h)>=u&&(a=n.substring(u,l),s.push(a)),s}return n.split(t.delimiter)}for(t.skip>0&&r.splice(t.skip),t.header?(!0===t.header?(t.comment=a(r),t.cast=a(r),i=a(r)):"Array"===this.getType(t.header)&&(i=t.header),o=this.buildObjectConstructor(i,r[0].split(t.delimiter),t.cast)):o=this.buildArrayConstructor(i,r[0].split(t.delimiter),t.cast);r.length>0;){var s=a(r);s.length>1&&n(o(s),i[0])}return!0},safeParse:function(e,t){var n=t.newline,i=e.split(n);return t.skip>0&&i.splice(t.skip),!0},encodeCells:function(e,t,n){for(var i=e.slice(0),o=0,r=i.length;o<r;o++)-1!==i[o].indexOf(this.quoteMark)&&(i[o]=i[o].replace(this.quoteRegex,this.doubleQuoteMark)),-1===i[o].indexOf(t)&&-1===i[o].indexOf(n)||(i[o]=this.quoteMark+i[o]+this.quoteMark);return i.join(t)},encodeArrays:function(e,t,n){var i=t.delimiter,o=t.newline;t.header&&"Array"===this.getType(t.header)&&n(this.encodeCells(t.header,i,o));for(var r=0,a=this.getLimit(t.limit,e.length);r<a;r++)n(this.encodeCells(e[r],i,o));return!0},encodeObjects:function(e,t,n){var i=t.delimiter,o=t.newline,r=[],a=[];for(var s in e[0])r.push(s),a.push(e[0][s]);!0===t.header?n(this.encodeCells(r,i,o)):"Array"===this.getType(t.header)&&n(this.encodeCells(t.header,i,o)),n(this.encodeCells(a,i,"\n"));for(var c=1,u=this.getLimit(t.limit,e.length);c<u;c++){a=[];for(var l=0,h=r.length;l<h;l++)a.push(e[c][r[l]]);n(this.encodeCells(a,i,o))}return!0},parse:function(e,t,n){var i=[];if("Function"===this.getType(t)?(n=t,t={}):"Function"!==this.getType(n)&&(n=i.push.bind(i)),t=this.assign({},this.STANDARD_DECODE_OPTS,t),this.opts=t,!t.delimiter||!t.newline){var o=Math.min(48,Math.floor(e.length/20),e.length);t.delimiter=t.delimiter||this.mostFrequent(e,rt,0!==o),t.newline=t.newline||this.mostFrequent(e,at,0!==o)}return this.unsafeParse(e,t,n)&&(!(i.length>0)||i)},encode:function(e,t,n){var i=[];return"Function"===this.getType(t)?n=t:"Function"!==this.getType(n)&&(n=(i=[]).push.bind(i)),(t=this.assign({},this.STANDARD_ENCODE_OPTS,t)).skip>0&&(e=e.slice(t.skip)),("Array"===this.getType(e[0])?this.encodeArrays:this.encodeObjects)(e,t,n)&&(!(i.length>0)||i.join(t.newline))}},ut=ot("CsvManager")(et=function(){function e(){k(this,"csvTables",{}),k(this,"csvTableForArr",{}),k(this,"tableCast",{}),k(this,"tableComment",{})}var t=e.prototype;return t.addTable=function(e,t,n){if(!this.csvTables[e]||n){var i={},o=[];ct.parse(t,{header:!0},(function(e,t){i[e[t]]=e,o.push(e)})),this.tableCast[e]=ct.opts.cast,this.tableComment[e]=ct.opts.comment,this.csvTables[e]=i,this.csvTableForArr[e]=o}},t.getTableArr=function(e){return this.csvTableForArr[e]},t.getTable=function(e){return this.csvTables[e]},t.queryOne=function(e,t,n){var i=this.getTable(e);if(!i)return null;if(!t)return i[n];for(var o in i)if(i.hasOwnProperty(o)&&i[o][t]===n)return i[o]},t.queryByID=function(e,t){return this.queryOne(e,null,t)},t.queryAll=function(e,t,n){var i=this.getTable(e);if(!i||!t)return null;var o={};for(var r in i)i.hasOwnProperty(r)&&i[r][t]===n&&(o[r]=i[r]);return o},t.queryIn=function(e,t,n){var i=this.getTable(e);if(!i||!t)return null;for(var o={},r=Object.keys(i),a=r.length,s=0;s<a;s++){var c=i[r[s]];n.indexOf(c[t])>-1&&(o[r[s]]=c)}return o},t.queryByCondition=function(e,t){if(t.constructor!==Object)return null;var n=this.getTable(e);if(!n)return null;for(var i={},o=Object.keys(n),r=o.length,a=Object.keys(t),s=a.length,c=0;c<r;c++){for(var u=n[o[c]],l=!0,h=0;h<s;h++){var d=a[h];l=l&&t[d].indexOf(u[d])>-1&&!i[o[c]]}l&&(i[o[c]]=u)}return i},e}())||et;e._RF.pop(),e._RF.push({},"acd0cVlaIhLurmAIUS/N+2B","localConfig",void 0);var lt,ht,dt,ft,pt,gt=t.ccclass,vt=(t.property,gt("localConfig")((it=nt=function(){function e(){k(this,"csvManager",null),k(this,"_callback",null),k(this,"_skills",{}),k(this,"currentLoad",0),k(this,"cntLoad",0),k(this,"servers",[])}var t=e.prototype;return t.loadConfig=function(e){this._callback=e,this.csvManager=new ut,this.loadCSV()},t.loadCSV=function(){var e=this,t=["game","gameType","sceneInteract","choiceQuestion"];this.cntLoad=t.length,t.forEach((function(t,n,i){ge.getData(t,(function(n,i){e.csvManager.addTable(t,i),e.tryToCallbackOnFinished()}))}))},t.queryOne=function(e,t,n){return this.csvManager.queryOne(e,t,n)},t.queryByID=function(e,t){return this.csvManager.queryByID(e,t)},t.getTable=function(e){return this.csvManager.getTable(e)},t.getTableArr=function(e){return this.csvManager.getTableArr(e)},t.getTypeCfgs=function(t,n){var i=e.instance.getTableArr(t),o=[];if(!i)return o;for(var r=i.length,a=0;a<r;a++){var s=i[a];s.type==n&&o.push(s)}return o},t.getCurPorCfgs=function(t,n,i){var o=e.instance.getIdCfgs(t,n),r=[];if(!o)return r;for(var a=o.length,s=0;s<a;s++){var c=o[s];c.progress==i&&r.push(c)}return r},t.getCurPorCfg=function(t,n,i){for(var o=e.instance.getTypeCfgs(t,n),r=o.length,a=null,s=0;s<r;s++){var c=o[s];c.progress==i&&(a=c)}return a},t.getIdCfgs=function(t,n){var i=e.instance.getTableArr(t),o=[];if(!i)return o;for(var r=i.length,a=0;a<r;a++){var s=i[a];(s.id||s.ID)==n&&o.push(s)}return o},t.getCfg=function(t,n){var i=e.instance.getTableArr(t);if(!i)return null;for(var o=i.length,r=0;r<o;r++){var a=i[r];if((a.id||a.ID)==n)return a}return null},t.queryAll=function(e,t,n){return this.csvManager.queryAll(e,t,n)},t.queryIn=function(e,t,n){return this.csvManager.queryIn(e,t,n)},t.queryByCondition=function(e,t){return this.csvManager.queryByCondition(e,t)},t.tryToCallbackOnFinished=function(){this._callback&&(this.currentLoad++,this.currentLoad>=this.cntLoad&&this._callback())},t.getCurrentServer=function(){return this.servers[0]},t.getVersion=function(){var e=this.getCurrentServer();return e?e.version:"unknown"},E(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),k(nt,"_instance",void 0),tt=it))||tt);e._RF.pop(),e._RF.push({},"5a4c82RVRlNb4btzKuZBILm","CoursePanel",void 0);var mt,yt,bt,wt=t.ccclass,Tt=t.property,_t=(lt=wt("CoursePanel"),ht=Tt(w),lt((pt=x((ft=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return B(L(t=e.call.apply(e,[this].concat(i))||this),"tp",pt,L(t)),t}U(t,e);var n=t.prototype;return n.show=function(){var e=T.instance.getVisibleSize().height/De.Height;this.tp.setScale(e,e)},n.onClickClose=function(){Ce.instance.showPanel(he),this.hidePanel()},n.onClickPlay=function(){Ce.instance.showPanel(fe),this.hidePanel()},n.hidePanel=function(){ve.instance.playOneShot(Fe.AUDIO_SOUND.BUTTON),Ce.instance.hidePanel(this.moduleEum)},t}(me)).prototype,"tp",[ht],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),dt=ft))||dt);e._RF.pop(),e._RF.push({},"d41282ylT5Gc4ctTtJ3Szc8","EventManager",void 0);var Ct=(0,t.ccclass)("EventManager")((bt=yt=function(){function e(){k(this,"handlers",{}),k(this,"supportEvent",{})}var t=e.prototype;return t.on=function(e,t,n){var i={handler:t,target:n},o=this.handlers[e];o||(o=[],this.handlers[e]=o);for(var r=0;r<o.length;r++)if(!o[r])return o[r]=i,r;return o.push(i),o.length},t.off=function(e,t,n){var i=this.handlers[e];if(i)for(var o=0;o<i.length;o++){var r=i[o];if(r.handler===t&&(!n||n===r.target)){i.splice(o,1);break}}},t.dispatchEvent=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var o,r=this.handlers[e];for(o=1;o<arguments.length;o++);if(r)for(o=0;o<r.length;o++){var a=r[o];a.handler&&a.handler.apply(a.target,n)}},t.setSupportEventList=function(e){if(!(e instanceof Array))return a("supportEvent was not array"),!1;for(var t in this.supportEvent={},e){var n=e[t];this.supportEvent[n]=t}return!0},E(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),k(yt,"_instance",void 0),mt=bt))||mt;e._RF.pop(),e._RF.push({},"280efuXoo9EGIAvdS1njCrX","TimerManager",void 0);var St,Nt,Dt,It,Pt,Ot,Rt,At,Mt,Et,kt,Ut=function(){function e(){}var t=e.prototype;return t.setTimeout=function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){for(var n=e,i=t,o=arguments.length,r=new Array(o>2?o-2:0),a=2;a<o;a++)r[a-2]=arguments[a];var s=r;return setTimeout.apply(void 0,[n,i].concat(s))})),t.clearTimeout=function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){clearTimeout(e)})),t.setInterval=function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){for(var n=e,i=t,o=arguments.length,r=new Array(o>2?o-2:0),a=2;a<o;a++)r[a-2]=arguments[a];var s=r;return setInterval.apply(void 0,[n,i].concat(s))})),t.clearInterval=function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){clearInterval(e)})),t.wait=function(){var e=A(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){setTimeout(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}();k(Ut,"_instance",void 0),e._RF.pop(),e._RF.push({},"ad345qlz/JOeI2224UVwFSg","GameItem",void 0);var Ft,Lt,Bt,xt,qt,zt,jt,Vt,Gt,Ht,Wt,Yt,Jt,Kt,Zt,Qt,Xt,$t,en,tn,nn,on,rn,an,sn,cn,un,ln,hn,dn,fn,pn,gn,vn,mn,yn=t.ccclass,bn=t.property,wn=(St=yn("GameItem"),Nt=bn(_),Dt=bn(C),It=bn(C),Pt=bn(w),St((At=x((Rt=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return B(L(t=e.call.apply(e,[this].concat(i))||this),"pro",At,L(t)),B(L(t),"markLab",Mt,L(t)),B(L(t),"numLab",Et,L(t)),B(L(t),"circle",kt,L(t)),k(L(t),"anim",null),k(L(t),"isPlay",!1),k(L(t),"num",void 0),k(L(t),"tween",void 0),k(L(t),"isAnimPlay",!1),k(L(t),"isEndTween",!1),t}U(t,e);var n=t.prototype;return n.onLoad=function(){this.anim=this.node.getComponent(S),this.anim.on(N.EventType.FINISHED,this.onAnimEnd,this)},n.show=function(e){this.num=e,this.numLab.string=e.toString(),this.markLab.string="",this.circle.active=!1,this.isPlay=!1,this.isAnimPlay=!1,this.isEndTween=!1},n.playAnim=function(e,t){this.isAnimPlay=!0,this.isPlay=e,e?(this.markLab.string="+"+t,this.anim.play("iitemAnim1")):(this.markLab.string=""+t,this.anim.play("iitemAnim2")),this.circle.active=!0},n.onAnimEnd=function(){this.isAnimPlay=!1,this.isPlay?(this.node.active=!1,Ct.instance.dispatchEvent(re)):Ct.instance.dispatchEvent(oe)},n.updateTween=function(e){var t=this;if(this.node.active){this.pro.progress=0;var n=this.getTime(e);this.tween||(this.tween=new D(this.pro),this.tween.to(n,{progress:1}).call((function(){Ct.instance.dispatchEvent(se),t.clearTween()})).start())}},n.clearTween=function(){this.tween&&(this.tween.stop(),this.tween.removeSelf(),this.tween=null)},n.getTime=function(e){var t=3;switch(e){case 1:t=5;break;case 2:t=4;break;case 3:t=3}return t},n.dispose=function(){this.clearTween(),this.num=0},t}(o)).prototype,"pro",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Mt=x(Rt.prototype,"markLab",[Dt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Et=x(Rt.prototype,"numLab",[It],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),kt=x(Rt.prototype,"circle",[Pt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ot=Rt))||Ot);e._RF.pop(),e._RF.push({},"5dc08QbVW1OarokieGjrSzY","GameView",void 0);var Tn,_n,Cn,Sn=t.ccclass,Nn=t.property,Dn=(Ft=Sn("GameView"),Lt=Nn(w),Bt=Nn(C),xt=Nn(C),qt=Nn(C),zt=Nn(w),jt=Nn(w),Vt=Nn(w),Gt=Nn(w),Ht=Nn(w),Wt=Nn(w),Yt=Nn(w),Jt=Nn(w),Kt=Nn(w),Zt=Nn(w),Qt=Nn(w),Xt=Nn(w),Ft((tn=x((en=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return k(L(t=e.call.apply(e,[this].concat(i))||this),"isOpen",!0),B(L(t),"itemNode",tn,L(t)),B(L(t),"scoreLab",nn,L(t)),B(L(t),"timeLab",on,L(t)),B(L(t),"hitNum",rn,L(t)),B(L(t),"levelNode",an,L(t)),B(L(t),"endNode",sn,L(t)),B(L(t),"bodyRange",cn,L(t)),B(L(t),"bodyBg1",un,L(t)),B(L(t),"bodyBg2",ln,L(t)),B(L(t),"downTimeNode",hn,L(t)),B(L(t),"drawNode",dn,L(t)),B(L(t),"desNode",fn,L(t)),B(L(t),"guideNode",pn,L(t)),B(L(t),"bodyNode",gn,L(t)),B(L(t),"twoGameNode",vn,L(t)),B(L(t),"guideBg",mn,L(t)),k(L(t),"_audioSource",null),k(L(t),"time",null),k(L(t),"endTime",void 0),k(L(t),"curLv",void 0),k(L(t),"allScore",0),k(L(t),"hitCount",0),k(L(t),"pos",void 0),k(L(t),"curHit",void 0),k(L(t),"itemTime",null),k(L(t),"pauseTime",null),k(L(t),"openDownTime",null),k(L(t),"timeMag",null),k(L(t),"isCheckBody",!1),k(L(t),"isAr",!1),k(L(t),"isBodyPos",!1),k(L(t),"btnTime",null),k(L(t),"widget",null),k(L(t),"texture",null),t}U(t,e);var n=t.prototype;return n.onLoad=function(){this.timeMag=Ut.instance,this.widget=[{horizontalCenter:0,bottom:464},{horizontalCenter:-263,bottom:420},{horizontalCenter:263,bottom:420},{horizontalCenter:-480,bottom:211},{horizontalCenter:480,bottom:211}],this._audioSource=this.node.getComponent(I),this.isCheckBody=J.instance.isCheckBody,this.isAr=J.instance.isAr,this.isBodyPos=J.instance.isBodyPos},n.onEnable=function(){Ct.instance.on(oe,this.pauseItem,this),Ct.instance.on(re,this.checkActive,this),Ct.instance.on(se,this.checkTimeEnd,this)},n.onDisable=function(){Ct.instance.off(oe,this.pauseItem,this),Ct.instance.off(re,this.checkActive,this),Ct.instance.off(se,this.checkTimeEnd,this)},n.show=function(e){if(console.log("开始"),!J.instance.isGuide&&this.isAr){this.guideNode.active=!0;var t=T.instance.getVisibleSize().height/De.Height;this.guideBg.setScale(t,t),J.instance.isGuide=!0}else this.updatePanel()},n.updatePanel=function(){this.guideNode.active=!1,this.isAr&&this.openSend(),this.isCheckBody?(this.bodyBg1.active=this.isCheckBody,this.bodyBg2.active=!this.isCheckBody,this.bodyNode.active=!0):this.downTime(),this.twoGameNode.active=!this.isAr,this.isOpen=!0,this.curLv=1,this.curHit=1,this.endNode.active=!1,this.bodyRange.active=!0,this.updateLv(),this.updateBodyPos()},n.openSend=function(){if(Pe.isIOS())console.log("ios请求摄像头"),this.drawNode.getComponent(y).setAnchorPoint(0,0),this.itemNode.getComponent(y).setAnchorPoint(0,0),Te.instance.reqFunc("sendOpen");else{if(console.log("安卓请求摄像头"),this.drawNode.getComponent(y).setAnchorPoint(0,1),this.itemNode.getComponent(y).setAnchorPoint(0,1),!window.android)return void console.warn("平台暂无");window.android.sendOpen()}var e=this.bodyRange.getComponent(P);e.horizontalCenter=0,e.top=0},n.hideSend=function(){if(Pe.isIOS())Te.instance.reqFunc("sendClose");else{if(!window.android)return void console.warn("平台暂无");window.android.sendClose()}},n.sendTakeNotes=function(){var e=J.instance.gameId;console.log("游戏ID："+e),ee.instance.post(X.takeNotes,{gameId:e,again:!1},(function(e){e.success&&200==e.code&&(J.instance.logId=e.result,console.debug("开始游戏记录成功： "+e))}))},n.sendUpdateRecord=function(e){var t=this,n=J.instance.logId;console.log("分数："+this.allScore);var i=-(this.getCurTime()-this.getEndTime());ee.instance.post(X.update,{logId:n,level:e,duration:i.toString(),fraction:this.allScore},(function(n){if(n.success&&200==n.code&&(console.debug("结束游戏记录成功： "+n),e>0)){if(t.sendAwardReceive(),!J.instance.abilityValueRuleId)return;t.sendAcqiore()}}))},n.sendAwardReceive=function(){var e=J.instance.ruleId,t=J.instance.gameId;console.log("规则id: "+e+" 游戏id: "+t),ee.instance.post(X.doIt,{ruleId:e,gameId:t},(function(e){console.log("code: "+e.code+"success: "+e.success),e.success&&200==e.code&&(console.log("奖励已发放: "+e),J.instance.hqBean=e.result),Ct.instance.dispatchEvent(ae)}))},n.sendAcqiore=function(){J.instance.abilityNum="";var e=J.instance.abilityValueRuleId,t=J.instance.gameId,n=this.isAr?14:6,i=J.instance.ageBegin,o=J.instance.ageEnd;console.log("能力规则id: "+e+" 游戏id: "+t+"内容类型: "+n+"年龄下限: "+i+"年龄上限:"+o),ee.instance.postJson(X.acquire,{abilityValueRuleId:e,contentId:t,contentType:n,ageBegin:i,ageEnd:o},(function(e){console.log("code: "+e.code+"success: "+e.success),e.success&&200==e.code&&(console.log("奖励已发放: "+e),J.instance.abilityNum=e.result),Ct.instance.dispatchEvent(ae)}))},n.playAnim=function(e){this._audioSource&&(this._audioSource.stop(),ve.instance.playSound(e,this._audioSource))},n.pauseItem=function(){var e=this;if(this.itemNode){for(var t,n=this.itemNode.children.length,i=0;i<n;i++)(t=this.itemNode.children[i]).active&&(this.hitCount=0),t.active=!1,t.getComponent(wn).dispose();J.instance.isWrong=!1,J.instance.isTopicEnd=!1,this.hitNum.string=this.hitCount.toString(),this.pauseTime=this.timeMag.setTimeout((function(){e.curLv==e.getDifficultylv()&&0!=e.hitCount||(e.curLv=e.getDifficultylv(),e.updateLv()),e.updateItem(),e.timeMag.clearTimeout(e.pauseTime)}),1e3)}},n.getDifficultylv=function(){return this.hitCount>=9&&this.hitCount<17?2:this.hitCount>=17?3:1},n.checkActive=function(){if(this.itemNode){for(var e,t=!1,n=!1,i=this.itemNode.children.length,o=0;o<i;o++)(e=this.itemNode.children[o]).active&&(t=!0),e.getComponent(wn).isAnimPlay&&(n=!0);(!t||!n&&J.instance.isTopicEnd)&&this.pauseItem()}},n.checkTimeEnd=function(){if(this.itemNode){J.instance.isTopicEnd||(J.instance.isTopicEnd=!0);for(var e=!1,t=this.itemNode.children.length,n=0;n<t;n++)this.itemNode.children[n].getComponent(wn).isAnimPlay&&(e=!0);e||this.pauseItem()}},n.createTime=function(){var e=this;this.endTime=this.getEndTime(),this.timeLab.string=Pe.formatTimeForMillisecond(this.endTime-(this.getCurTime()+1e3)),this.time=this.timeMag.setInterval((function(){var t=e.endTime-e.getCurTime();t<0&&(e.timeMag.clearInterval(e.time),Ce.instance.showPanel(ue,e.allScore),e.sendUpdateRecord(1),e.hidePanel()),e.timeLab.string=Pe.formatTimeForMillisecond(t)}),1e3)},n.getEndTime=function(){return(new Date).getTime()+6e4},n.getCurTime=function(){return(new Date).getTime()},n.updateLv=function(){for(var e=0;e<3;e++){var t=this.levelNode.getChildByName("star_"+e);if(t.active=e<this.curLv,t.active)t.getComponent(S).play()}},n.updateItem=function(){var e=this,t=this.getOrder();ge.getUIPrefabRes(pe,(function(n,i){if(!n){var o,r=null,a=t.length;e.curHit=1;for(var s=0;s<a;s++){if(!e.itemNode)return;var u=t[s],l=e.widget[u];(r=e.itemNode.children[s])||(r=c(i),e.isAr||r.on(w.EventType.TOUCH_END,e.onClickItem,e),e.itemNode.addChild(r));var h=r.getComponent(P);h.horizontalCenter=l.horizontalCenter,h.bottom=l.bottom,r.active=s<e.curLv+2,(o=r.getComponent(wn)).show(s+1),o.updateTween(e.curLv)}}}))},n.release=function(){if(this.itemNode)for(var e,t=this.itemNode.children.length-1;t>=0;t--)(e=this.itemNode.children[t]).off(w.EventType.TOUCH_END,this.onClickItem,this),e.getComponent(wn).dispose(),e.destroy(),e.removeFromParent()},n.onClickItem=function(e){console.log("点击成功");var t=e.currentTarget.getComponent(wn);if(!(t.isAnimPlay||J.instance.isWrong||J.instance.isTopicEnd))if(this.curHit==t.num){this.playAnim(Fe.AUDIO_SOUND.ADD),this.hitCount++,this.curHit++;var n=10+2*this.hitCount;this.allScore+=n,this.hitNum.string=this.hitCount.toString(),this.hitNum.node.getComponent(S).play(),this.scoreLab.string=this.allScore.toString(),t.playAnim(!0,n)}else J.instance.isWrong=!0,this.playAnim(Fe.AUDIO_SOUND.OUT),this.hitCount=0,this.curHit=1,this.curLv=this.curLv>1?this.curLv-1:1,this.hitNum.string="0",this.scoreLab.string=(this.allScore-20).toString(),t.playAnim(!1,-20),this.allScore=this.allScore-20},n.checkItemTouch=function(e,t){if(this.itemNode)for(var n,i=this.itemNode.children.length,o=0;o<i;o++)if((n=this.itemNode.children[o]).active){var r=n.getComponent(wn);if(this.checkDis(n,e,t)){if(r.isAnimPlay||J.instance.isWrong||J.instance.isTopicEnd)return;if(this.curHit==r.num){this.playAnim(Fe.AUDIO_SOUND.ADD),this.hitCount++,this.curHit++;var a=10+2*this.hitCount;this.allScore+=a,this.hitNum.string=this.hitCount.toString(),this.hitNum.node.getComponent(S).play(),this.scoreLab.string=this.allScore.toString(),r.playAnim(!0,a)}else J.instance.isWrong=!0,this.playAnim(Fe.AUDIO_SOUND.OUT),this.hitCount=0,this.curHit=1,this.curLv=this.curLv>1?this.curLv-1:1,this.hitNum.string="0",this.scoreLab.string=(this.allScore-20).toString(),r.playAnim(!1,-20),this.allScore=this.allScore-20}}},n.checkBody=function(e,t,n){return!!Pe.checkBodyRange(e.position.x,e.position.y,t,n)},n.checkDis=function(e,t,n){return!!Pe.distanceSquare(e.position.x,e.position.y,t,n)},n.getOrder=function(){return function(e){for(var t=0;t<e.length;t++){var n=Math.round(Math.random()*(e.length-1-t))+t,i=[e[n],e[t]];e[t]=i[0],e[n]=i[1]}return e}([0,1,2,3,4])},n.iosUpBodyPos=function(){},n.dataURLToBlob=function(e){for(var t=e.split(","),n=t[0].match(/:(.*?);/)[1],i=atob(t[1]),o=i.length,r=new Uint8Array(o);o--;)r[o]=i.charCodeAt(o);return new Blob([r],{type:n})},n.updateBodyPos=function(){var e=this,t=!0,n=T.instance.getVisibleSize(),i=null;window.getImageUrlAndDots=function(o,r){if(e.isOpen){var a=0,s=0,c=!1;if(r){var u=JSON.parse(r),l=o.split(";");if(t&&(t=!1,console.log(r),console.log("手机屏幕宽: "+n.width+"屏幕高："+n.height),console.log("传输背景宽: "+l[0]+"高："+l[1])),!u||u.length<1)console.warn("空数据");else{for(var h=0;h<u.length;h++){var d=u[h];if(!e.isOpen)return;if(Pe.isIOS()?(a=d.x/Number(l[0])*n.width,s=d.y/Number(l[1])*n.height):(a=(1-d.x/Number(l[0]))*n.width,s=-d.y/Number(l[1])*n.height),e.isBodyPos){var f=e.drawNode.getChildByName("dian"+h);if(!f)continue;f.setPosition(a,s)}h>14&&h<23&&(e.checkItemTouch(a,s),e.isCheckBody&&!c&&(c=!e.checkBody(e.bodyRange,a,s)))}e.isCheckBody&&(c||(e.bodyBg1.active=c,e.bodyBg2.active=!c,i||(console.log("进入开始倒计时"),i=e.timeMag.setTimeout((function(){e.isCheckBody=!1,e.bodyBg1.active=!1,e.bodyBg2.active=!1,e.timeMag.clearTimeout(i),e.downTime(),console.log("开始游戏")}),2e3))))}}else console.log("位置数据为空: "+r)}}},n.base64ToTexture2D=function(e,t,n){if(e){var i=new Image;i.src="data:image/png;base64,"+e;var o=new f;i.onload=function(){o.reset({width:i.width,height:i.height}),o.uploadData(i,0,0),o.loaded=!0;var e=new l;e.texture=o,t.spriteFrame=e}}},n.downTime=function(){var e=this;this.bodyNode.active=!1,this.downTimeNode.active=!0,this.bodyRange.active=!1;var t=3;this.playAnim(Fe.AUDIO_SOUND.COUNT_DOWN),this.downTimeActive(t),this.openDownTime=this.timeMag.setInterval((function(){t--,e.downTimeActive(t),0==t?(e.sendTakeNotes(),e.timeMag.clearInterval(e.openDownTime),e.downTimeNode.active=!1,e.updateItem(),e.createTime()):e.playAnim(Fe.AUDIO_SOUND.COUNT_DOWN)}),1e3)},n.downTimeActive=function(e){for(var t=1;t<4;t++)this.downTimeNode.getChildByName(t+"").active=e==t},n.onClickEnd=function(){var e=this;this.endNode.active=!this.endNode.active,this.endNode.active?this.btnTime||(this.btnTime=this.timeMag.setTimeout((function(){e.endNode.active=!1,e.timeMag.clearTimeout(e.btnTime),e.btnTime=null}),2e3)):(this.timeMag.clearTimeout(this.btnTime),this.btnTime=null)},n.onClickClose=function(){ve.instance.playSound(Fe.AUDIO_SOUND.BUTTON),Ce.instance.showPanel(he),this.sendUpdateRecord(0),this.hidePanel()},n.hidePanel=function(){this.isOpen=!1,Ce.instance.hidePanel(this.moduleEum)},n.dispose=function(){this.time&&(this.timeMag.clearInterval(this.time),this.time=null),this.pauseTime&&(this.timeMag.clearTimeout(this.pauseTime),this.pauseTime=null),this.openDownTime&&(this.timeMag.clearInterval(this.openDownTime),this.openDownTime=null),this.btnTime&&(this.timeMag.clearTimeout(this.btnTime),this.btnTime=null),this._audioSource&&(this._audioSource.stop(),this._audioSource.destroy(),this._audioSource=null),this.timeMag=null,this.curLv=0,this.allScore=0,this.hitCount=0,this.pos=null,this.isAr&&this.hideSend()},t}(me)).prototype,"itemNode",[Lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nn=x(en.prototype,"scoreLab",[Bt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),on=x(en.prototype,"timeLab",[xt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rn=x(en.prototype,"hitNum",[qt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),an=x(en.prototype,"levelNode",[zt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),sn=x(en.prototype,"endNode",[jt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),cn=x(en.prototype,"bodyRange",[Vt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),un=x(en.prototype,"bodyBg1",[Gt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ln=x(en.prototype,"bodyBg2",[Ht],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),hn=x(en.prototype,"downTimeNode",[Wt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),dn=x(en.prototype,"drawNode",[Yt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fn=x(en.prototype,"desNode",[Jt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pn=x(en.prototype,"guideNode",[Kt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gn=x(en.prototype,"bodyNode",[Zt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vn=x(en.prototype,"twoGameNode",[Qt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mn=x(en.prototype,"guideBg",[Xt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$t=en))||$t);e._RF.pop(),e._RF.push({},"b08023hl2dPirr+tz3oDtGv","VideoManager",void 0);var In,Pn=t.ccclass,On=(t.property,"playing"),Rn="paused",An="stopped",Mn="completed",En="meta-loaded",kn="ready-to-play",Un="error",Fn="clicked",Ln=Pn("VideoManager")((Cn=_n=function(){function e(){k(this,"isStopPed",!1),k(this,"videoNode",void 0),k(this,"controls",void 0)}var t=e.prototype;return t.init=function(e){this.videoNode=e},t.setVideoClip=function(e){this.videoNode.remoteURL=e,this.videoNode.node.active=!0},t.playVideo=function(){this.videoNode.play(),this.videoNode.node.active=!0},t.stopVideo=function(){this.videoNode.stop(),this.videoNode.node.active=!1},E(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(),k(_n,"_instance",void 0),Tn=Cn))||Tn;e._RF.pop(),e._RF.push({},"d89c5U6FEFJvJfnrqri72Ws","GuidePanel",void 0);var Bn,xn,qn,zn,jn,Vn,Gn,Hn,Wn,Yn,Jn,Kn,Zn,Qn,Xn,$n,ei,ti=t.ccclass,ni=(t.property,ti("GuidePanel")(In=function(e){function t(){return e.apply(this,arguments)||this}U(t,e);var n=t.prototype;return n.show=function(){var e=Ln.instance;e.controls=!0,e.playVideo()},n.onClickClose=function(){Ce.instance.showPanel(he),this.hidePanel()},n.onClickPlay=function(){Ce.instance.showPanel(fe),this.hidePanel()},n.hidePanel=function(){Ln.instance.stopVideo(),Ce.instance.hidePanel(this.moduleEum),ve.instance.playSound(Fe.AUDIO_SOUND.BUTTON)},t}(me))||In);e._RF.pop(),e._RF.push({},"ff72b0k8SlMDZWpwKrQ3Nq6","ScorePanel",void 0);var ii=t.ccclass,oi=t.property,ri=(Bn=ii("ScorePanel"),xn=oi(C),qn=oi(C),zn=oi(C),jn=oi(C),Vn=oi(w),Gn=oi(w),Hn=oi(w),Bn((Jn=x((Yn=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return B(L(t=e.call.apply(e,[this].concat(i))||this),"num",Jn,L(t)),B(L(t),"hq",Kn,L(t)),B(L(t),"ability",Zn,L(t)),B(L(t),"des",Qn,L(t)),B(L(t),"bgNode",Xn,L(t)),B(L(t),"abilityNode",$n,L(t)),B(L(t),"hqNode",ei,L(t)),k(L(t),"score",void 0),t}U(t,e);var n=t.prototype;return n.onLoad=function(){},n.onEnable=function(){Ct.instance.on(ae,this.updatePanel,this)},n.onDisable=function(){Ct.instance.off(ae,this.updatePanel,this)},n.show=function(e){this.score=e;var t=T.instance.getVisibleSize().height/De.Height;this.bgNode.setScale(t,t),e>0?ve.instance.playOneShot(Fe.AUDIO_SOUND.ADD_COMPLETE):ve.instance.playOneShot(Fe.AUDIO_SOUND.OUT_COMPLETE),this.num.string=e.toString(),this.updatePanel()},n.updatePanel=function(){console.log("更新积分界面");var e=!!J.instance.abilityValueRuleId&&!!J.instance.abilityNum,t=!!J.instance.hqBean;this.abilityNode.active=e,this.hqNode.active=t;var n=e?80:0;this.hqNode.setPosition(n,-147),n=t?-74:0,this.abilityNode.setPosition(n,-147),t&&(this.hq.string="+"+J.instance.hqBean),e&&(this.ability.string="+"+J.instance.abilityNum),this.des.string=this.score>Number(J.instance.MaxNum)?"恭喜您新的记录产生了!":"恭喜您真棒!"},n.onClickClose=function(){Ce.instance.showPanel(he),this.hidePanel()},n.onClickAgain=function(){Ce.instance.showPanel(fe),this.hidePanel()},n.onClickRanking=function(){console.log("暂无排行榜")},n.hidePanel=function(){ve.instance.playOneShot(Fe.AUDIO_SOUND.BUTTON),Ce.instance.hidePanel(this.moduleEum)},t}(me)).prototype,"num",[xn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Kn=x(Yn.prototype,"hq",[qn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Zn=x(Yn.prototype,"ability",[zn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Qn=x(Yn.prototype,"des",[jn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xn=x(Yn.prototype,"bgNode",[Vn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$n=x(Yn.prototype,"abilityNode",[Gn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ei=x(Yn.prototype,"hqNode",[Hn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Wn=Yn))||Wn);e._RF.pop(),e._RF.push({},"64650l8N21MMoG4D2AoH5YK","UIModule",void 0);var ai,si,ci,ui,li,hi,di,fi=function(){function e(){}return e.init=function(){Ce.instance.registerPanel(fe,Dn),Ce.instance.registerPanel(ue,ri),Ce.instance.registerPanel(le,ni),Ce.instance.registerPanel(he,je),Ce.instance.registerPanel(de,_t)},e.initPrefab=function(){},e}();e._RF.pop(),e._RF.push({},"22058dkep9EbrevkmVXLs1x","GameMain",void 0);var pi,gi=t.ccclass,vi=t.property;ai=gi("GameMain"),si=vi(O),ci=vi(I),ai((hi=x((li=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return B(L(t=e.call.apply(e,[this].concat(i))||this),"video",hi,L(t)),B(L(t),"audio",di,L(t)),t}U(t,e);var n=t.prototype;return n.onLoad=function(){fi.init(),console.log("进入游戏"),J.instance.urlSearch(),Ce.instance.showPanel(he),Ln.instance.init(this.video),ge.preload(fe,s),ge.preload(le,s),ve.instance.init(this.audio)},n.init=function(){window.app={localConfig:vt,CsvManager:ut,resourceUtil:ge,UIManger:Ce,LayerManager:$e,ServiceManager:ee,util:Pe}},n.onState=function(e){switch(e.state){case On:console.debug("视频播放中");break;case Rn:console.debug("视频暂停中");break;case An:console.debug("视频停止中"),Ln.instance.isStopPed=!0;break;case Fn:console.debug("点击视频");break;case Mn:console.debug("播放完毕"),Ln.instance.isStopPed=!1;break;case En:console.debug("视频元数据加载完毕"),this.video.play();break;case kn:console.debug("视频加载完毕");break;case Un:console.error("视频加载错误")}},t}(o)).prototype,"video",[si],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),di=x(li.prototype,"audio",[ci],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ui=li));e._RF.pop(),e._RF.push({},"615a87h4R9CN7fLYX7tsOrY","PlatformAndroid",void 0),e._RF.pop(),e._RF.push({},"775560sh2hIj5h0qf+p5X5v","Compress",void 0),k(function(){function e(){}var t=e.prototype;return t.find_best_size=function(e){var t=Math.ceil(Math.sqrt(e));if(t>4096)return null;for(var n=1e9,i=0,o=0,r=Math.ceil(e/4096);r<=t;r++){var a=Math.ceil(e/r),s=a*r;if(s<n&&(n=s,o=a,i=r),s==e)break}return{w:o,h:i}},t.str_to_bytes=function(e){for(var t=e.length,n=new Uint8Array(t),i=0;i<t;i++)n[i]=e.charCodeAt(i);return n},t.encode_1px_3byte=function(e){for(var t=Math.ceil(e.length/3),n=this.find_best_size(t),i=new ArrayBuffer(n.w*n.h*4),o=new Uint32Array(i),r=0,a=0;r<t;r++,a+=3)o[r]=e[a+0]<<0|e[a+1]<<8|e[a+2]<<16|4278190080;var s=new Uint8ClampedArray(i);return new ImageData(s,n.w,n.h)},t.compress=function(e,t){var n=this.encode_1px_3byte.bind(this)(e),i=document.createElement("canvas");i.width=n.width,i.height=n.height,i.getContext("2d").putImageData(n,0,0),t(i.toDataURL("image/png"))},t.handle=function(e,t,n){void 0===n&&(n=void 0);var i=this.utf8_to_bytes(e);this.compress(i,(function(e){t&&t.call(n,e)}))},t.utf8_to_bytes=function(e){for(var t=[],n=0,i=0,o=encodeURI(e),r=o.length;n<r;){var a=o.charCodeAt(n);if(37==a){var s=o.substr(n+1,2);a=parseInt(s,16),n+=3}else n++;t[i++]=a}return t},t.unHandle=function(e,t,n){var i=this;void 0===n&&(n=void 0);var o=new Image;o.onload=function(){for(var e=i.uncompress(o),r=[],a=0,s=e.length;a<s;a++)r.push(String.fromCharCode(e[a]));t.call(n,r.join(""))},o.src=e},t.uncompress=function(e){var t=e.width,n=e.height,i=document.createElement("canvas");i.width=t,i.height=n;var o=i.getContext("2d");o.drawImage(e,0,0);var r=o.getImageData(0,0,t,n).data.buffer;return this.decode_1px_3byte(r)},t.decode_1px_3byte=function(e){for(var t=new Uint32Array(e),n=t.length,i=new Uint8Array(3*n),o=0,r=0;r<n;r++){var a=t[r];i[o++]=a,i[o++]=a>>8&255,i[o++]=a>>16&255}return i},E(e,null,[{key:"I",get:function(){return this._I||(this._I=new e),this._I}}]),e}(),"_I",void 0),e._RF.pop(),e._RF.push({},"a90b9WyY3VO/oD/GsVKTD40","SaveHelper",void 0),e._RF.pop(),e._RF.push({},"b10b0hQ+KNIjLLp6mUS7QFN","PlatformOther",void 0),e._RF.pop(),e._RF.push({},"b40c01HzXhJNKR9w33f1MzU","LayerBase",void 0);var mi,yi=(0,t.ccclass)("LayerBase")(pi=function(e){function t(){return e.apply(this,arguments)||this}return U(t,e),t.prototype.clear=function(){},t}(o))||pi;e._RF.pop(),e._RF.push({},"e5667FaC0lNh5CzGMSbFLs9","IPlatform",void 0),e._RF.pop(),e._RF.push({},"ee185T4Oh9NV4ztLZ79D2wp","LayerDrag",void 0);(0,t.ccclass)("LayerDrag")(mi=function(e){function t(){return e.apply(this,arguments)||this}return U(t,e),t.prototype.start=function(){},t}(yi));e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///main.js'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});